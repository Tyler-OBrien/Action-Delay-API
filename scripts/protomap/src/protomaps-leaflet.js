"use strict";var protomapsL=(()=>{var We=Object.defineProperty;var Li=Object.getOwnPropertyDescriptor;var Pi=Object.getOwnPropertyNames;var Si=Object.prototype.hasOwnProperty;var D=Math.pow;var l=(n,e)=>We(n,"name",{value:e,configurable:!0});var Ti=(n,e)=>{for(var t in e)We(n,t,{get:e[t],enumerable:!0})},Fi=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Pi(e))!Si.call(n,r)&&r!==t&&We(n,r,{get:()=>e[r],enumerable:!(i=Li(e,r))||i.enumerable});return n};var Mi=n=>Fi(We({},"__esModule",{value:!0}),n);var A=(n,e,t)=>new Promise((i,r)=>{var a=c=>{try{s(t.next(c))}catch(u){r(u)}},o=c=>{try{s(t.throw(c))}catch(u){r(u)}},s=c=>c.done?i(c.value):Promise.resolve(c.value).then(a,o);s((t=t.apply(n,e)).next())});var Sa={};Ti(Sa,{CenteredSymbolizer:()=>at,CenteredTextSymbolizer:()=>Q,CircleSymbolizer:()=>De,FlexSymbolizer:()=>Ut,Font:()=>La,GeomType:()=>rt,GroupSymbolizer:()=>Ae,IconSymbolizer:()=>Vt,Index:()=>dt,Justify:()=>ci,Labeler:()=>ye,Labelers:()=>xe,LineLabelPlacement:()=>hi,LineLabelSymbolizer:()=>ee,LineSymbolizer:()=>O,OffsetSymbolizer:()=>ot,OffsetTextSymbolizer:()=>Re,Padding:()=>Nt,PmtilesSource:()=>pe,PolygonSymbolizer:()=>M,Sheet:()=>xn,ShieldSymbolizer:()=>$t,Static:()=>gn,TextPlacements:()=>ui,TextSymbolizer:()=>Be,TileCache:()=>Ce,View:()=>ut,ZxySource:()=>Me,arr:()=>la,covering:()=>gi,createPattern:()=>sa,exp:()=>V,getZoom:()=>pn,isCcw:()=>ai,isInRing:()=>It,labelRules:()=>Oe,leafletLayer:()=>za,linear:()=>st,paint:()=>Ne,paintRules:()=>je,pointInPolygon:()=>oi,pointMinDistToLines:()=>li,pointMinDistToPoints:()=>si,sourcesToViews:()=>Ue,step:()=>ha,toIndex:()=>G,transformGeom:()=>$e,wrap:()=>Ve});function x(n,e){this.x=n,this.y=e}l(x,"Point");x.prototype={clone(){return new x(this.x,this.y)},add(n){return this.clone()._add(n)},sub(n){return this.clone()._sub(n)},multByPoint(n){return this.clone()._multByPoint(n)},divByPoint(n){return this.clone()._divByPoint(n)},mult(n){return this.clone()._mult(n)},div(n){return this.clone()._div(n)},rotate(n){return this.clone()._rotate(n)},rotateAround(n,e){return this.clone()._rotateAround(n,e)},matMult(n){return this.clone()._matMult(n)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(n){return this.x===n.x&&this.y===n.y},dist(n){return Math.sqrt(this.distSqr(n))},distSqr(n){let e=n.x-this.x,t=n.y-this.y;return e*e+t*t},angle(){return Math.atan2(this.y,this.x)},angleTo(n){return Math.atan2(this.y-n.y,this.x-n.x)},angleWith(n){return this.angleWithSep(n.x,n.y)},angleWithSep(n,e){return Math.atan2(this.x*e-this.y*n,this.x*n+this.y*e)},_matMult(n){let e=n[0]*this.x+n[1]*this.y,t=n[2]*this.x+n[3]*this.y;return this.x=e,this.y=t,this},_add(n){return this.x+=n.x,this.y+=n.y,this},_sub(n){return this.x-=n.x,this.y-=n.y,this},_mult(n){return this.x*=n,this.y*=n,this},_div(n){return this.x/=n,this.y/=n,this},_multByPoint(n){return this.x*=n.x,this.y*=n.y,this},_divByPoint(n){return this.x/=n.x,this.y/=n.y,this},_unit(){return this._div(this.mag()),this},_perp(){let n=this.y;return this.y=this.x,this.x=-n,this},_rotate(n){let e=Math.cos(n),t=Math.sin(n),i=e*this.x-t*this.y,r=t*this.x+e*this.y;return this.x=i,this.y=r,this},_rotateAround(n,e){let t=Math.cos(n),i=Math.sin(n),r=e.x+t*(this.x-e.x)-i*(this.y-e.y),a=e.y+i*(this.x-e.x)+t*(this.y-e.y);return this.x=r,this.y=a,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:x};x.convert=function(n){if(n instanceof x)return n;if(Array.isArray(n))return new x(+n[0],+n[1]);if(n.x!==void 0&&n.y!==void 0)return new x(+n.x,+n.y);throw new Error("Expected [x, y] or {x, y} point format")};var Ci=Object.defineProperty,J=l((n,e)=>Ci(n,"name",{value:e,configurable:!0}),"r");function I(n,e){let t="script";return n==="name"?t="script":n==="name2"?t="script2":n==="name3"&&(t="script3"),[["coalesce",["get",`pgf:${n}`],["get",n]],{"text-font":["case",["==",["get",t],"Devanagari"],["literal",["Noto Sans Devanagari Regular v1"]],["literal",[e||"Noto Sans Regular"]]]}]}l(I,"l");J(I,"get_name_block");function W(n,e,t){let i="name";return t==="name"?i="":t==="name2"?i="2":t==="name3"&&(i="3"),e==="Latin"?["has",`script${i}`]:n==="ja"?["all",["!=",["get",`script${i}`],"Han"],["!=",["get",`script${i}`],"Hiragana"],["!=",["get",`script${i}`],"Katakana"],["!=",["get",`script${i}`],"Mixed-Japanese"]]:["!=",["get",`script${i}`],e]}l(W,"c");J(W,"is_not_in_target_script");function N(n){return n==="Devanagari"?{"text-font":["literal",["Noto Sans Devanagari Regular v1"]]}:{}}l(N,"o");J(N,"get_font_formatting");function gt(n){let e=Di.find(t=>t.lang===n);return e===void 0?"Latin":e.script}l(gt,"d");J(gt,"get_default_script");function Tn(n,e){let t=e||gt(n),i;return t==="Devanagari"?i="pgf:":i="",["format",["coalesce",["get",`${i}name:${n}`],["get","name:en"]],N(t)]}l(Tn,"_");J(Tn,"get_country_name");function Z(n,e,t){let i=e||gt(n),r;return i==="Devanagari"?r="pgf:":r="",["case",["all",["any",["has","name"],["has","pgf:name"]],["!",["any",["has","name2"],["has","pgf:name2"]]],["!",["any",["has","name3"],["has","pgf:name3"]]]],["case",W(n,i,"name"),["case",["any",["is-supported-script",["get","name"]],["has","pgf:name"]],["format",["coalesce",["get",`${r}name:${n}`],["get","name:en"]],N(i),`
`,{},["case",["all",["!",["has",`${r}name:${n}`]],["has","name:en"],["!",["has","script"]]],"",["coalesce",["get","pgf:name"],["get","name"]]],{"text-font":["case",["==",["get","script"],"Devanagari"],["literal",["Noto Sans Devanagari Regular v1"]],["literal",[t||"Noto Sans Regular"]]]}],["get","name:en"]],["format",["coalesce",["get",`${r}name:${n}`],["get","pgf:name"],["get","name"]],N(i)]],["all",["any",["has","name"],["has","pgf:name"]],["any",["has","name2"],["has","pgf:name2"]],["!",["any",["has","name3"],["has","pgf:name3"]]]],["case",["all",W(n,i,"name"),W(n,i,"name2")],["format",["get",`${r}name:${n}`],N(i),`
`,{},...I("name"),`
`,{},...I("name2")],["case",W(n,i,"name2"),["format",["coalesce",["get",`${r}name:${n}`],["get","pgf:name"],["get","name"]],N(i),`
`,{},...I("name2")],["format",["coalesce",["get",`${r}name:${n}`],["get","pgf:name2"],["get","name2"]],N(i),`
`,{},...I("name")]]],["case",["all",W(n,i,"name"),W(n,i,"name2"),W(n,i,"name3")],["format",["get",`${r}name:${n}`],N(i),`
`,{},...I("name"),`
`,{},...I("name2"),`
`,{},...I("name3")],["case",["!",W(n,i,"name")],["format",["coalesce",["get",`${r}name:${n}`],["get","pgf:name"],["get","name"]],N(i),`
`,{},...I("name2"),`
`,{},...I("name3")],["!",W(n,i,"name2")],["format",["coalesce",["get",`${r}name:${n}`],["get","pgf:name2"],["get","name2"]],N(i),`
`,{},...I("name"),`
`,{},...I("name3")],["format",["coalesce",["get",`${r}name:${n}`],["get","pgf:name3"],["get","name3"]],N(i),`
`,{},...I("name"),`
`,{},...I("name2")]]]]}l(Z,"s");J(Z,"get_multiline_name");var Di=[{lang:"ar",full_name:"Arabic",script:"Arabic"},{lang:"cs",full_name:"Czech",script:"Latin"},{lang:"bg",full_name:"Bulgarian",script:"Cyrillic"},{lang:"da",full_name:"Danish",script:"Latin"},{lang:"de",full_name:"German",script:"Latin"},{lang:"el",full_name:"Greek",script:"Greek"},{lang:"en",full_name:"English",script:"Latin"},{lang:"es",full_name:"Spanish",script:"Latin"},{lang:"et",full_name:"Estonian",script:"Latin"},{lang:"fa",full_name:"Persian",script:"Arabic"},{lang:"fi",full_name:"Finnish",script:"Latin"},{lang:"fr",full_name:"French",script:"Latin"},{lang:"ga",full_name:"Irish",script:"Latin"},{lang:"he",full_name:"Hebrew",script:"Hebrew"},{lang:"hi",full_name:"Hindi",script:"Devanagari"},{lang:"hr",full_name:"Croatian",script:"Latin"},{lang:"hu",full_name:"Hungarian",script:"Latin"},{lang:"id",full_name:"Indonesian",script:"Latin"},{lang:"it",full_name:"Italian",script:"Latin"},{lang:"ja",full_name:"Japanese",script:""},{lang:"ko",full_name:"Korean",script:"Hangul"},{lang:"lt",full_name:"Lithuanian",script:"Latin"},{lang:"lv",full_name:"Latvian",script:"Latin"},{lang:"ne",full_name:"Nepali",script:"Devanagari"},{lang:"nl",full_name:"Dutch",script:"Latin"},{lang:"no",full_name:"Norwegian",script:"Latin"},{lang:"mr",full_name:"Marathi",script:"Devanagari"},{lang:"mt",full_name:"Maltese",script:"Latin"},{lang:"pl",full_name:"Polish",script:"Latin"},{lang:"pt",full_name:"Portuguese",script:"Latin"},{lang:"ro",full_name:"Romanian",script:"Latin"},{lang:"ru",full_name:"Russian",script:"Cyrillic"},{lang:"sk",full_name:"Slovak",script:"Latin"},{lang:"sl",full_name:"Slovenian",script:"Latin"},{lang:"sv",full_name:"Swedish",script:"Latin"},{lang:"tr",full_name:"Turkish",script:"Latin"},{lang:"uk",full_name:"Ukrainian",script:"Cyrillic"},{lang:"ur",full_name:"Urdu",script:"Arabic"},{lang:"vi",full_name:"Vietnamese",script:"Latin"},{lang:"zh-Hans",full_name:"Chinese (Simplified)",script:"Han"},{lang:"zh-Hant",full_name:"Chinese (Traditional)",script:"Han"}];function Fn(n,e){return[{id:"background",type:"background",paint:{"background-color":e.background}},{id:"earth",type:"fill",filter:["==","$type","Polygon"],source:n,"source-layer":"earth",paint:{"fill-color":e.earth}},...e.landcover?[{id:"landcover",type:"fill",source:n,"source-layer":"landcover",paint:{"fill-color":["match",["get","kind"],"grassland",e.landcover.grassland,"barren",e.landcover.barren,"urban_area",e.landcover.urban_area,"farmland",e.landcover.farmland,"glacier",e.landcover.glacier,"scrub",e.landcover.scrub,e.landcover.forest],"fill-opacity":["interpolate",["linear"],["zoom"],5,1,7,0]}}]:[],{id:"landuse_park",type:"fill",source:n,"source-layer":"landuse",filter:["in","kind","national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course","wood","nature_reserve","forest","scrub","grassland","grass","military","naval_base","airfield"],paint:{"fill-opacity":["interpolate",["linear"],["zoom"],6,0,11,1],"fill-color":["case",["in",["get","kind"],["literal",["national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course"]]],e.park_b,["in",["get","kind"],["literal",["wood","nature_reserve","forest"]]],e.wood_b,["in",["get","kind"],["literal",["scrub","grassland","grass"]]],e.scrub_b,["in",["get","kind"],["literal",["glacier"]]],e.glacier,["in",["get","kind"],["literal",["sand"]]],e.sand,["in",["get","kind"],["literal",["military","naval_base","airfield"]]],e.zoo,e.earth]}},{id:"landuse_urban_green",type:"fill",source:n,"source-layer":"landuse",filter:["in","kind","allotments","village_green","playground"],paint:{"fill-color":e.park_b,"fill-opacity":.7}},{id:"landuse_hospital",type:"fill",source:n,"source-layer":"landuse",filter:["==","kind","hospital"],paint:{"fill-color":e.hospital}},{id:"landuse_industrial",type:"fill",source:n,"source-layer":"landuse",filter:["==","kind","industrial"],paint:{"fill-color":e.industrial}},{id:"landuse_school",type:"fill",source:n,"source-layer":"landuse",filter:["in","kind","school","university","college"],paint:{"fill-color":e.school}},{id:"landuse_beach",type:"fill",source:n,"source-layer":"landuse",filter:["in","kind","beach"],paint:{"fill-color":e.beach}},{id:"landuse_zoo",type:"fill",source:n,"source-layer":"landuse",filter:["in","kind","zoo"],paint:{"fill-color":e.zoo}},{id:"landuse_aerodrome",type:"fill",source:n,"source-layer":"landuse",filter:["in","kind","aerodrome"],paint:{"fill-color":e.aerodrome}},{id:"roads_runway",type:"line",source:n,"source-layer":"roads",filter:["==","kind_detail","runway"],paint:{"line-color":e.runway,"line-width":["interpolate",["exponential",1.6],["zoom"],10,0,12,4,18,30]}},{id:"roads_taxiway",type:"line",source:n,"source-layer":"roads",minzoom:13,filter:["==","kind_detail","taxiway"],paint:{"line-color":e.runway,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,15,6]}},{id:"landuse_runway",type:"fill",source:n,"source-layer":"landuse",filter:["any",["in","kind","runway","taxiway"]],paint:{"fill-color":e.runway}},{id:"water",type:"fill",filter:["==","$type","Polygon"],source:n,"source-layer":"water",paint:{"fill-color":e.water}},{id:"water_stream",type:"line",source:n,"source-layer":"water",minzoom:14,filter:["in","kind","stream"],paint:{"line-color":e.water,"line-width":.5}},{id:"water_river",type:"line",source:n,"source-layer":"water",minzoom:9,filter:["in","kind","river"],paint:{"line-color":e.water,"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1,18,12]}},{id:"landuse_pedestrian",type:"fill",source:n,"source-layer":"landuse",filter:["==","kind","pedestrian"],paint:{"fill-color":e.pedestrian}},{id:"landuse_pier",type:"fill",source:n,"source-layer":"landuse",filter:["==","kind","pier"],paint:{"fill-color":e.pier}},{id:"roads_tunnels_other_casing",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_tunnel"],["in","kind","other","path"]],paint:{"line-color":e.tunnel_other_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_tunnels_minor_casing",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_tunnel"],["==","kind","minor_road"]],paint:{"line-color":e.tunnel_minor_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_tunnels_link_casing",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_tunnel"],["has","is_link"]],paint:{"line-color":e.tunnel_link_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_tunnels_major_casing",type:"line",source:n,"source-layer":"roads",filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","major_road"]],paint:{"line-color":e.tunnel_major_casing,"line-dasharray":[3,2],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_tunnels_highway_casing",type:"line",source:n,"source-layer":"roads",filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","highway"],["!has","is_link"]],paint:{"line-color":e.tunnel_highway_casing,"line-dasharray":[6,.5],"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_tunnels_other",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_tunnel"],["in","kind","other","path"]],paint:{"line-color":e.tunnel_other,"line-dasharray":[4.5,.5],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_tunnels_minor",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_tunnel"],["==","kind","minor_road"]],paint:{"line-color":e.tunnel_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_tunnels_link",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_tunnel"],["has","is_link"]],paint:{"line-color":e.tunnel_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_tunnels_major",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_tunnel"],["==","kind","major_road"]],paint:{"line-color":e.tunnel_major,"line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_tunnels_highway",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_tunnel"],["==",["get","kind"],"highway"],["!",["has","is_link"]]],paint:{"line-color":e.tunnel_highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"buildings",type:"fill",source:n,"source-layer":"buildings",filter:["in","kind","building","building_part"],paint:{"fill-color":e.buildings,"fill-opacity":.5}},{id:"roads_pier",type:"line",source:n,"source-layer":"roads",filter:["==","kind_detail","pier"],paint:{"line-color":e.pier,"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,.5,20,16]}},{id:"roads_minor_service_casing",type:"line",source:n,"source-layer":"roads",minzoom:13,filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","minor_road"],["==","kind_detail","service"]],paint:{"line-color":e.minor_service_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,18,8],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,.8]}},{id:"roads_minor_casing",type:"line",source:n,"source-layer":"roads",filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","minor_road"],["!=","kind_detail","service"]],paint:{"line-color":e.minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1]}},{id:"roads_link_casing",type:"line",source:n,"source-layer":"roads",minzoom:13,filter:["has","is_link"],paint:{"line-color":e.minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1.5]}},{id:"roads_major_casing_late",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","major_road"]],paint:{"line-color":e.major_casing_late,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_highway_casing_late",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","highway"],["!has","is_link"]],paint:{"line-color":e.highway_casing_late,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_other",type:"line",source:n,"source-layer":"roads",filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["in","kind","other","path"],["!=","kind_detail","pier"]],paint:{"line-color":e.other,"line-dasharray":[3,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_link",type:"line",source:n,"source-layer":"roads",filter:["has","is_link"],paint:{"line-color":e.link,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_minor_service",type:"line",source:n,"source-layer":"roads",filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","minor_road"],["==","kind_detail","service"]],paint:{"line-color":e.minor_service,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,18,8]}},{id:"roads_minor",type:"line",source:n,"source-layer":"roads",filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","minor_road"],["!=","kind_detail","service"]],paint:{"line-color":["interpolate",["exponential",1.6],["zoom"],11,e.minor_a,16,e.minor_b],"line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_major_casing_early",type:"line",source:n,"source-layer":"roads",maxzoom:12,filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","major_road"]],paint:{"line-color":e.major_casing_early,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,13],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1]}},{id:"roads_major",type:"line",source:n,"source-layer":"roads",filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","major_road"]],paint:{"line-color":e.major,"line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_highway_casing_early",type:"line",source:n,"source-layer":"roads",maxzoom:12,filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","highway"],["!has","is_link"]],paint:{"line-color":e.highway_casing_early,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1]}},{id:"roads_highway",type:"line",source:n,"source-layer":"roads",filter:["all",["!has","is_tunnel"],["!has","is_bridge"],["==","kind","highway"],["!has","is_link"]],paint:{"line-color":e.highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}},{id:"roads_rail",type:"line",source:n,"source-layer":"roads",filter:["==","kind","rail"],paint:{"line-dasharray":[.3,.75],"line-opacity":.5,"line-color":e.railway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,.15,18,9]}},{id:"boundaries_country",type:"line",source:n,"source-layer":"boundaries",filter:["<=","kind_detail",2],paint:{"line-color":e.boundaries,"line-width":.7,"line-dasharray":["step",["zoom"],["literal",[2]],4,["literal",[2,1]]]}},{id:"boundaries",type:"line",source:n,"source-layer":"boundaries",filter:[">","kind_detail",2],paint:{"line-color":e.boundaries,"line-width":.4,"line-dasharray":["step",["zoom"],["literal",[2]],4,["literal",[2,1]]]}},{id:"roads_bridges_other_casing",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["in","kind","other","path"]],paint:{"line-color":e.bridges_other_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_bridges_link_casing",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["has","is_link"]],paint:{"line-color":e.bridges_minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],12,0,12.5,1.5]}},{id:"roads_bridges_minor_casing",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["==","kind","minor_road"]],paint:{"line-color":e.bridges_minor_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11],"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,.8]}},{id:"roads_bridges_major_casing",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["==","kind","major_road"]],paint:{"line-color":e.bridges_major_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,.5,18,10],"line-width":["interpolate",["exponential",1.6],["zoom"],9,0,9.5,1.5]}},{id:"roads_bridges_other",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["in","kind","other","path"]],paint:{"line-color":e.bridges_other,"line-dasharray":[2,1],"line-width":["interpolate",["exponential",1.6],["zoom"],14,0,20,7]}},{id:"roads_bridges_minor",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["==","kind","minor_road"]],paint:{"line-color":e.bridges_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],11,0,12.5,.5,15,2,18,11]}},{id:"roads_bridges_link",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["has","is_link"]],paint:{"line-color":e.bridges_minor,"line-width":["interpolate",["exponential",1.6],["zoom"],13,0,13.5,1,18,11]}},{id:"roads_bridges_major",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["==","kind","major_road"]],paint:{"line-color":e.bridges_major,"line-width":["interpolate",["exponential",1.6],["zoom"],6,0,12,1.6,15,3,18,13]}},{id:"roads_bridges_highway_casing",type:"line",source:n,"source-layer":"roads",minzoom:12,filter:["all",["has","is_bridge"],["==","kind","highway"],["!has","is_link"]],paint:{"line-color":e.bridges_highway_casing,"line-gap-width":["interpolate",["exponential",1.6],["zoom"],3,0,3.5,.5,18,15],"line-width":["interpolate",["exponential",1.6],["zoom"],7,0,7.5,1,20,15]}},{id:"roads_bridges_highway",type:"line",source:n,"source-layer":"roads",filter:["all",["has","is_bridge"],["==","kind","highway"],["!has","is_link"]],paint:{"line-color":e.bridges_highway,"line-width":["interpolate",["exponential",1.6],["zoom"],3,0,6,1.1,12,1.6,15,5,18,15]}}]}l(Fn,"f");J(Fn,"nolabels_layers");function Mn(n,e,t,i){return[{id:"address_label",type:"symbol",source:n,"source-layer":"buildings",minzoom:18,filter:["==","kind","address"],layout:{"symbol-placement":"point","text-font":[e.italic||"Noto Sans Italic"],"text-field":["get","addr_housenumber"],"text-size":12},paint:{"text-color":e.address_label,"text-halo-color":e.address_label_halo,"text-halo-width":1}},{id:"water_waterway_label",type:"symbol",source:n,"source-layer":"water",minzoom:13,filter:["in","kind","river","stream"],layout:{"symbol-placement":"line","text-font":[e.italic||"Noto Sans Italic"],"text-field":Z(t,i,e.regular),"text-size":12,"text-letter-spacing":.2},paint:{"text-color":e.ocean_label,"text-halo-color":e.water,"text-halo-width":1}},{id:"roads_labels_minor",type:"symbol",source:n,"source-layer":"roads",minzoom:15,filter:["in","kind","minor_road","other","path"],layout:{"symbol-sort-key":["get","min_zoom"],"symbol-placement":"line","text-font":[e.regular||"Noto Sans Regular"],"text-field":Z(t,i,e.regular),"text-size":12},paint:{"text-color":e.roads_label_minor,"text-halo-color":e.roads_label_minor_halo,"text-halo-width":1}},{id:"water_label_ocean",type:"symbol",source:n,"source-layer":"water",filter:["in","kind","sea","ocean","bay","strait","fjord"],layout:{"text-font":[e.italic||"Noto Sans Italic"],"text-field":Z(t,i,e.regular),"text-size":["interpolate",["linear"],["zoom"],3,10,10,12],"text-letter-spacing":.1,"text-max-width":9,"text-transform":"uppercase"},paint:{"text-color":e.ocean_label,"text-halo-width":1,"text-halo-color":e.water}},{id:"water_label_lakes",type:"symbol",source:n,"source-layer":"water",filter:["in","kind","lake","water"],layout:{"text-font":[e.italic||"Noto Sans Italic"],"text-field":Z(t,i,e.regular),"text-size":["interpolate",["linear"],["zoom"],3,10,6,12,10,12],"text-letter-spacing":.1,"text-max-width":9},paint:{"text-color":e.ocean_label,"text-halo-color":e.water,"text-halo-width":1}},{id:"roads_labels_major",type:"symbol",source:n,"source-layer":"roads",minzoom:11,filter:["in","kind","highway","major_road"],layout:{"symbol-sort-key":["get","min_zoom"],"symbol-placement":"line","text-font":[e.regular||"Noto Sans Regular"],"text-field":Z(t,i,e.regular),"text-size":12},paint:{"text-color":e.roads_label_major,"text-halo-color":e.roads_label_major_halo,"text-halo-width":1}},...e.pois?[{id:"pois",type:"symbol",source:n,"source-layer":"pois",filter:["all",["in",["get","kind"],["literal",["beach","forest","marina","park","peak","zoo","garden","bench","aerodrome","station","bus_stop","ferry_terminal","stadium","university","library","school","animal","toilets","drinking_water"]]],[">=",["zoom"],["+",["get","min_zoom"],0]]],layout:{"icon-image":["match",["get","kind"],"station","train_station",["get","kind"]],"text-font":[e.regular||"Noto Sans Regular"],"text-justify":"auto","text-field":Z(t,i,e.regular),"text-size":["interpolate",["linear"],["zoom"],17,10,19,16],"text-max-width":8,"text-offset":[1.1,0],"text-variable-anchor":["left","right"]},paint:{"text-color":["case",["in",["get","kind"],["literal",["beach","forest","marina","park","peak","zoo","garden","bench"]]],e.pois.green,["in",["get","kind"],["literal",["aerodrome","station","bus_stop","ferry_terminal"]]],e.pois.lapis,["in",["get","kind"],["literal",["stadium","university","library","school","animal","toilets","drinking_water"]]],e.pois.slategray,e.earth],"text-halo-color":e.earth,"text-halo-width":1}}]:[],{id:"places_subplace",type:"symbol",source:n,"source-layer":"places",filter:["==","kind","neighbourhood"],layout:{"symbol-sort-key":["get","min_zoom"],"text-field":Z(t,i,e.regular),"text-font":[e.regular||"Noto Sans Regular"],"text-max-width":7,"text-letter-spacing":.1,"text-padding":["interpolate",["linear"],["zoom"],5,2,8,4,12,18,15,20],"text-size":["interpolate",["exponential",1.2],["zoom"],11,8,14,14,18,24],"text-transform":"uppercase"},paint:{"text-color":e.subplace_label,"text-halo-color":e.subplace_label_halo,"text-halo-width":1}},{id:"places_locality",type:"symbol",source:n,"source-layer":"places",filter:["==","kind","locality"],layout:{"icon-image":["step",["zoom"],"townspot",8,""],"icon-size":.7,"text-field":Z(t,i,e.regular),"text-font":["case",["<=",["get","min_zoom"],5],["literal",[e.bold||"Noto Sans Medium"]],["literal",[e.regular||"Noto Sans Regular"]]],"text-padding":["interpolate",["linear"],["zoom"],5,3,8,7,12,11],"text-size":["interpolate",["linear"],["zoom"],2,["case",["<",["get","population_rank"],13],8,[">=",["get","population_rank"],13],13,0],4,["case",["<",["get","population_rank"],13],10,[">=",["get","population_rank"],13],15,0],6,["case",["<",["get","population_rank"],12],11,[">=",["get","population_rank"],12],17,0],8,["case",["<",["get","population_rank"],11],11,[">=",["get","population_rank"],11],18,0],10,["case",["<",["get","population_rank"],9],12,[">=",["get","population_rank"],9],20,0],15,["case",["<",["get","population_rank"],8],12,[">=",["get","population_rank"],8],22,0]],"icon-padding":["interpolate",["linear"],["zoom"],0,0,8,4,10,8,12,6,22,2],"text-justify":"auto","text-anchor":["step",["zoom"],"left",8,"center"],"text-radial-offset":.4},paint:{"text-color":e.city_label,"text-halo-color":e.city_label_halo,"text-halo-width":1}},{id:"places_region",type:"symbol",source:n,"source-layer":"places",filter:["==","kind","region"],layout:{"symbol-sort-key":["get","min_zoom"],"text-field":["step",["zoom"],["get","name:short"],6,Z(t,i,e.regular)],"text-font":[e.regular||"Noto Sans Regular"],"text-size":["interpolate",["linear"],["zoom"],3,11,7,16],"text-radial-offset":.2,"text-anchor":"center","text-transform":"uppercase"},paint:{"text-color":e.state_label,"text-halo-color":e.state_label_halo,"text-halo-width":1}},{id:"places_country",type:"symbol",source:n,"source-layer":"places",filter:["==","kind","country"],layout:{"symbol-sort-key":["get","min_zoom"],"text-field":Tn(t,i),"text-font":[e.bold||"Noto Sans Medium"],"text-size":["interpolate",["linear"],["zoom"],2,["case",["<",["get","population_rank"],10],8,[">=",["get","population_rank"],10],12,0],6,["case",["<",["get","population_rank"],8],10,[">=",["get","population_rank"],8],18,0],8,["case",["<",["get","population_rank"],7],11,[">=",["get","population_rank"],7],20,0]],"icon-padding":["interpolate",["linear"],["zoom"],0,2,14,2,16,20,17,2,22,2],"text-transform":"uppercase"},paint:{"text-color":e.country_label,"text-halo-color":e.earth,"text-halo-width":1}}]}l(Mn,"p");J(Mn,"labels_layers");var Ai={background:"#cccccc",earth:"#e2dfda",park_a:"#cfddd5",park_b:"#9cd3b4",hospital:"#e4dad9",industrial:"#d1dde1",school:"#e4ded7",wood_a:"#d0ded0",wood_b:"#a0d9a0",pedestrian:"#e3e0d4",scrub_a:"#cedcd7",scrub_b:"#99d2bb",glacier:"#e7e7e7",sand:"#e2e0d7",beach:"#e8e4d0",aerodrome:"#dadbdf",runway:"#e9e9ed",water:"#80deea",zoo:"#c6dcdc",military:"#dcdcdc",tunnel_other_casing:"#e0e0e0",tunnel_minor_casing:"#e0e0e0",tunnel_link_casing:"#e0e0e0",tunnel_major_casing:"#e0e0e0",tunnel_highway_casing:"#e0e0e0",tunnel_other:"#d5d5d5",tunnel_minor:"#d5d5d5",tunnel_link:"#d5d5d5",tunnel_major:"#d5d5d5",tunnel_highway:"#d5d5d5",pier:"#e0e0e0",buildings:"#cccccc",minor_service_casing:"#e0e0e0",minor_casing:"#e0e0e0",link_casing:"#e0e0e0",major_casing_late:"#e0e0e0",highway_casing_late:"#e0e0e0",other:"#ebebeb",minor_service:"#ebebeb",minor_a:"#ebebeb",minor_b:"#ffffff",link:"#ffffff",major_casing_early:"#e0e0e0",major:"#ffffff",highway_casing_early:"#e0e0e0",highway:"#ffffff",railway:"#a7b1b3",boundaries:"#adadad",bridges_other_casing:"#e0e0e0",bridges_minor_casing:"#e0e0e0",bridges_link_casing:"#e0e0e0",bridges_major_casing:"#e0e0e0",bridges_highway_casing:"#e0e0e0",bridges_other:"#ebebeb",bridges_minor:"#ffffff",bridges_link:"#ffffff",bridges_major:"#f5f5f5",bridges_highway:"#ffffff",roads_label_minor:"#91888b",roads_label_minor_halo:"#ffffff",roads_label_major:"#938a8d",roads_label_major_halo:"#ffffff",ocean_label:"#728dd4",subplace_label:"#8f8f8f",subplace_label_halo:"#e0e0e0",city_label:"#5c5c5c",city_label_halo:"#e0e0e0",state_label:"#b3b3b3",state_label_halo:"#e0e0e0",country_label:"#a3a3a3",address_label:"#91888b",address_label_halo:"#ffffff",pois:{blue:"#1A8CBD",green:"#20834D",lapis:"#315BCF",pink:"#EF56BA",red:"#F2567A",slategray:"#6A5B8F",tangerine:"#CB6704",turquoise:"#00C3D4"},landcover:{grassland:"rgba(210, 239, 207, 1)",barren:"rgba(255, 243, 215, 1)",urban_area:"rgba(230, 230, 230, 1)",farmland:"rgba(216, 239, 210, 1)",glacier:"rgba(255, 255, 255, 1)",scrub:"rgba(234, 239, 210, 1)",forest:"rgba(196, 231, 210, 1)"}},Bi={background:"#34373d",earth:"#1f1f1f",park_a:"#1c2421",park_b:"#192a24",hospital:"#252424",industrial:"#222222",school:"#262323",wood_a:"#202121",wood_b:"#202121",pedestrian:"#1e1e1e",scrub_a:"#222323",scrub_b:"#222323",glacier:"#1c1c1c",sand:"#212123",beach:"#28282a",aerodrome:"#1e1e1e",runway:"#333333",water:"#31353f",zoo:"#222323",military:"#242323",tunnel_other_casing:"#141414",tunnel_minor_casing:"#141414",tunnel_link_casing:"#141414",tunnel_major_casing:"#141414",tunnel_highway_casing:"#141414",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",pier:"#333333",buildings:"#111111",minor_service_casing:"#1f1f1f",minor_casing:"#1f1f1f",link_casing:"#1f1f1f",major_casing_late:"#1f1f1f",highway_casing_late:"#1f1f1f",other:"#333333",minor_service:"#333333",minor_a:"#3d3d3d",minor_b:"#333333",link:"#3d3d3d",major_casing_early:"#1f1f1f",major:"#3d3d3d",highway_casing_early:"#1f1f1f",highway:"#474747",railway:"#000000",boundaries:"#5b6374",bridges_other_casing:"#2b2b2b",bridges_minor_casing:"#1f1f1f",bridges_link_casing:"#1f1f1f",bridges_major_casing:"#1f1f1f",bridges_highway_casing:"#1f1f1f",bridges_other:"#333333",bridges_minor:"#333333",bridges_link:"#3d3d3d",bridges_major:"#3d3d3d",bridges_highway:"#474747",roads_label_minor:"#525252",roads_label_minor_halo:"#1f1f1f",roads_label_major:"#666666",roads_label_major_halo:"#1f1f1f",ocean_label:"#717784",subplace_label:"#525252",subplace_label_halo:"#1f1f1f",city_label:"#7a7a7a",city_label_halo:"#212121",state_label:"#3d3d3d",state_label_halo:"#1f1f1f",country_label:"#5c5c5c",address_label:"#525252",address_label_halo:"#1f1f1f",pois:{blue:"#4299BB",green:"#30C573",lapis:"#2B5CEA",pink:"#EF56BA",red:"#F2567A",slategray:"#93939F",tangerine:"#F19B6E",turquoise:"#00C3D4"},landcover:{grassland:"rgba(30, 41, 31, 1)",barren:"rgba(38, 38, 36, 1)",urban_area:"rgba(28, 28, 28, 1)",farmland:"rgba(31, 36, 32, 1)",glacier:"rgba(43, 43, 43, 1)",scrub:"rgba(34, 36, 30, 1)",forest:"rgba(28, 41, 37, 1)"}},Ri={background:"#ffffff",earth:"#ffffff",park_a:"#fcfcfc",park_b:"#fcfcfc",hospital:"#f8f8f8",industrial:"#fcfcfc",school:"#f8f8f8",wood_a:"#fafafa",wood_b:"#fafafa",pedestrian:"#fdfdfd",scrub_a:"#fafafa",scrub_b:"#fafafa",glacier:"#fcfcfc",sand:"#fafafa",beach:"#f6f6f6",aerodrome:"#fdfdfd",runway:"#efefef",water:"#dcdcdc",zoo:"#f7f7f7",military:"#fcfcfc",tunnel_other_casing:"#d6d6d6",tunnel_minor_casing:"#fcfcfc",tunnel_link_casing:"#fcfcfc",tunnel_major_casing:"#fcfcfc",tunnel_highway_casing:"#fcfcfc",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",pier:"#efefef",buildings:"#efefef",minor_service_casing:"#ffffff",minor_casing:"#ffffff",link_casing:"#ffffff",major_casing_late:"#ffffff",highway_casing_late:"#ffffff",other:"#f5f5f5",minor_service:"#f5f5f5",minor_a:"#ebebeb",minor_b:"#f5f5f5",link:"#ebebeb",major_casing_early:"#ffffff",major:"#ebebeb",highway_casing_early:"#ffffff",highway:"#ebebeb",railway:"#d6d6d6",boundaries:"#adadad",bridges_other_casing:"#ffffff",bridges_minor_casing:"#ffffff",bridges_link_casing:"#ffffff",bridges_major_casing:"#ffffff",bridges_highway_casing:"#ffffff",bridges_other:"#f5f5f5",bridges_minor:"#f5f5f5",bridges_link:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#adadad",roads_label_minor_halo:"#ffffff",roads_label_major:"#999999",roads_label_major_halo:"#ffffff",ocean_label:"#adadad",subplace_label:"#8f8f8f",subplace_label_halo:"#ffffff",city_label:"#5c5c5c",city_label_halo:"#ffffff",state_label:"#b3b3b3",state_label_halo:"#ffffff",country_label:"#b8b8b8",address_label:"#adadad",address_label_halo:"#ffffff"},ji={background:"#a3a3a3",earth:"#cccccc",park_a:"#c2c2c2",park_b:"#c2c2c2",hospital:"#d0d0d0",industrial:"#c6c6c6",school:"#d0d0d0",wood_a:"#c2c2c2",wood_b:"#c2c2c2",pedestrian:"#c4c4c4",scrub_a:"#c2c2c2",scrub_b:"#c2c2c2",glacier:"#d2d2d2",sand:"#d2d2d2",beach:"#d2d2d2",aerodrome:"#c9c9c9",runway:"#f5f5f5",water:"#a3a3a3",zoo:"#c7c7c7",military:"#bfbfbf",tunnel_other_casing:"#b8b8b8",tunnel_minor_casing:"#b8b8b8",tunnel_link_casing:"#b8b8b8",tunnel_major_casing:"#b8b8b8",tunnel_highway_casing:"#b8b8b8",tunnel_other:"#d6d6d6",tunnel_minor:"#d6d6d6",tunnel_link:"#d6d6d6",tunnel_major:"#d6d6d6",tunnel_highway:"#d6d6d6",pier:"#b8b8b8",buildings:"#e0e0e0",minor_service_casing:"#cccccc",minor_casing:"#cccccc",link_casing:"#cccccc",major_casing_late:"#cccccc",highway_casing_late:"#cccccc",other:"#e0e0e0",minor_service:"#e0e0e0",minor_a:"#ebebeb",minor_b:"#e0e0e0",link:"#ebebeb",major_casing_early:"#cccccc",major:"#ebebeb",highway_casing_early:"#cccccc",highway:"#ebebeb",railway:"#f5f5f5",boundaries:"#5c5c5c",bridges_other_casing:"#cccccc",bridges_minor_casing:"#cccccc",bridges_link_casing:"#cccccc",bridges_major_casing:"#cccccc",bridges_highway_casing:"#cccccc",bridges_other:"#e0e0e0",bridges_minor:"#e0e0e0",bridges_link:"#ebebeb",bridges_major:"#ebebeb",bridges_highway:"#ebebeb",roads_label_minor:"#999999",roads_label_minor_halo:"#e0e0e0",roads_label_major:"#8f8f8f",roads_label_major_halo:"#ebebeb",ocean_label:"#7a7a7a",subplace_label:"#7a7a7a",subplace_label_halo:"#cccccc",city_label:"#474747",city_label_halo:"#cccccc",state_label:"#999999",state_label_halo:"#cccccc",country_label:"#858585",address_label:"#999999",address_label_halo:"#e0e0e0"},Oi={background:"#2b2b2b",earth:"#141414",park_a:"#181818",park_b:"#181818",hospital:"#1d1d1d",industrial:"#101010",school:"#111111",wood_a:"#1a1a1a",wood_b:"#1a1a1a",pedestrian:"#191919",scrub_a:"#1c1c1c",scrub_b:"#1c1c1c",glacier:"#191919",sand:"#161616",beach:"#1f1f1f",aerodrome:"#191919",runway:"#323232",water:"#333333",zoo:"#191919",military:"#121212",tunnel_other_casing:"#101010",tunnel_minor_casing:"#101010",tunnel_link_casing:"#101010",tunnel_major_casing:"#101010",tunnel_highway_casing:"#101010",tunnel_other:"#292929",tunnel_minor:"#292929",tunnel_link:"#292929",tunnel_major:"#292929",tunnel_highway:"#292929",pier:"#0a0a0a",buildings:"#0a0a0a",minor_service_casing:"#141414",minor_casing:"#141414",link_casing:"#141414",major_casing_late:"#141414",highway_casing_late:"#141414",other:"#1f1f1f",minor_service:"#1f1f1f",minor_a:"#292929",minor_b:"#1f1f1f",link:"#1f1f1f",major_casing_early:"#141414",major:"#292929",highway_casing_early:"#141414",highway:"#292929",railway:"#292929",boundaries:"#707070",bridges_other_casing:"#141414",bridges_minor_casing:"#141414",bridges_link_casing:"#141414",bridges_major_casing:"#141414",bridges_highway_casing:"#141414",bridges_other:"#1f1f1f",bridges_minor:"#1f1f1f",bridges_link:"#292929",bridges_major:"#292929",bridges_highway:"#292929",roads_label_minor:"#525252",roads_label_minor_halo:"#141414",roads_label_major:"#5c5c5c",roads_label_major_halo:"#141414",ocean_label:"#707070",subplace_label:"#5c5c5c",subplace_label_halo:"#141414",city_label:"#999999",city_label_halo:"#141414",state_label:"#3d3d3d",state_label_halo:"#141414",country_label:"#707070",address_label:"#525252",address_label_halo:"#141414"};function we(n){switch(n){case"light":return Ai;case"dark":return Bi;case"white":return Ri;case"grayscale":return ji;case"black":return Oi}throw new Error("Flavor not found")}l(we,"C");J(we,"namedFlavor");function Ii(n,e,t){let i=[];return t!=null&&t.labelsOnly||(i=Fn(n,e)),t!=null&&t.lang&&(i=i.concat(Mn(n,e,t.lang))),i}l(Ii,"R");J(Ii,"layers");function re(n,e,t){return Math.min(Math.max(n,t),e)}l(re,"guard");var yt=class yt extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}};l(yt,"ColorError");var bt=yt,ke=bt;function Cn(n){if(typeof n!="string")throw new ke(n);if(n.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=n.trim();e=Hi.test(n)?Yi(n):n;let t=Vi.exec(e);if(t){let o=Array.from(t).slice(1);return[...o.slice(0,3).map(s=>parseInt(ve(s,2),16)),parseInt(ve(o[3]||"f",2),16)/255]}let i=$i.exec(e);if(i){let o=Array.from(i).slice(1);return[...o.slice(0,3).map(s=>parseInt(s,16)),parseInt(o[3]||"ff",16)/255]}let r=Ui.exec(e);if(r){let o=Array.from(r).slice(1);return[...o.slice(0,3).map(s=>parseInt(s,10)),parseFloat(o[3]||"1")]}let a=Ni.exec(e);if(a){let[o,s,c,u]=Array.from(a).slice(1).map(parseFloat);if(re(0,100,s)!==s)throw new ke(n);if(re(0,100,c)!==c)throw new ke(n);return[...qi(o,s,c),Number.isNaN(u)?1:u]}throw new ke(n)}l(Cn,"parseToRgba");function Ei(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0)%2341}l(Ei,"hash");var Dn=l(n=>parseInt(n.replace(/_/g,""),36),"colorToInt"),Xi="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((n,e)=>{let t=Dn(e.substring(0,3)),i=Dn(e.substring(3)).toString(16),r="";for(let a=0;a<6-i.length;a++)r+="0";return n[t]=`${r}${i}`,n},{});function Yi(n){let e=n.toLowerCase().trim(),t=Xi[Ei(e)];if(!t)throw new ke(n);return`#${t}`}l(Yi,"nameToHex");var ve=l((n,e)=>Array.from(Array(e)).map(()=>n).join(""),"r"),Vi=new RegExp(`^#${ve("([a-f0-9])",3)}([a-f0-9])?$`,"i"),$i=new RegExp(`^#${ve("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),Ui=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${ve(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),Ni=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,Hi=/^[a-z]+$/i,An=l(n=>Math.round(n*255),"roundColor"),qi=l((n,e,t)=>{let i=t/100;if(e===0)return[i,i,i].map(An);let r=(n%360+360)%360/60,a=(1-Math.abs(2*i-1))*(e/100),o=a*(1-Math.abs(r%2-1)),s=0,c=0,u=0;r>=0&&r<1?(s=a,c=o):r>=1&&r<2?(s=o,c=a):r>=2&&r<3?(c=a,u=o):r>=3&&r<4?(c=o,u=a):r>=4&&r<5?(s=o,u=a):r>=5&&r<6&&(s=a,u=o);let d=i-a/2,h=s+d,f=c+d,m=u+d;return[h,f,m].map(An)},"hslToRgb");function Wi(n,e,t,i){return`rgba(${re(0,255,n).toFixed()}, ${re(0,255,e).toFixed()}, ${re(0,255,t).toFixed()}, ${parseFloat(re(0,1,i).toFixed(3))})`}l(Wi,"rgba");function Ze(n,e,t){let i=l((b,S)=>S===3?b:b/255,"normalize"),[r,a,o,s]=Cn(n).map(i),[c,u,d,h]=Cn(e).map(i),f=h-s,m=t*2-1,y=((m*f===-1?m:m+f/(1+m*f))+1)/2,_=1-y,v=(r*_+c*y)*255,g=(a*_+u*y)*255,w=(o*_+d*y)*255,F=h*t+s*(1-t);return Wi(v,g,w,F)}l(Ze,"mix");var xt=class xt{constructor(e,t){this.str=e!=null?e:t,this.perFeature=typeof this.str=="function"&&this.str.length===2}get(e,t){return typeof this.str=="function"?this.str(e,t):this.str}};l(xt,"StringAttr");var B=xt,_t=class _t{constructor(e,t=1){this.value=e!=null?e:t,this.perFeature=typeof this.value=="function"&&this.value.length===2}get(e,t){return typeof this.value=="function"?this.value(e,t):this.value}};l(_t,"NumberAttr");var T=_t,wt=class wt{constructor(e){var t;this.labelProps=(t=e==null?void 0:e.labelProps)!=null?t:["name"],this.textTransform=e==null?void 0:e.textTransform}get(e,t){let i,r;typeof this.labelProps=="function"?r=this.labelProps(e,t):r=this.labelProps;for(let o of r)if(Object.prototype.hasOwnProperty.call(t.props,o)&&typeof t.props[o]=="string"){i=t.props[o];break}let a;return typeof this.textTransform=="function"?a=this.textTransform(e,t):a=this.textTransform,i&&a==="uppercase"?i=i.toUpperCase():i&&a==="lowercase"?i=i.toLowerCase():i&&a==="capitalize"&&(i=i.toLowerCase().split(" ").map(c=>c[0].toUpperCase()+c.slice(1)).join(" ")),i}};l(wt,"TextAttr");var ae=wt,kt=class kt{constructor(e){var t,i;e!=null&&e.font?this.font=e.font:(this.family=(t=e==null?void 0:e.fontFamily)!=null?t:"sans-serif",this.size=(i=e==null?void 0:e.fontSize)!=null?i:12,this.weight=e==null?void 0:e.fontWeight,this.style=e==null?void 0:e.fontStyle)}get(e,t){if(this.font)return typeof this.font=="function"?this.font(e,t):this.font;let i="";this.style&&(typeof this.style=="function"?i=`${this.style(e,t)} `:i=`${this.style} `);let r="";this.weight&&(typeof this.weight=="function"?r=`${this.weight(e,t)} `:r=`${this.weight} `);let a;typeof this.size=="function"?a=this.size(e,t):a=this.size;let o;return typeof this.family=="function"?o=this.family(e,t):o=this.family,`${i}${r}${a}px ${o}`}};l(kt,"FontAttr");var oe=kt,vt=class vt{constructor(e,t=[]){this.value=e!=null?e:t,this.perFeature=typeof this.value=="function"&&this.value.length===2}get(e,t){return typeof this.value=="function"?this.value(e,t):this.value}};l(vt,"ArrayAttr");var Je=vt;var Zi=l((n,e,t)=>{let i=[],r,a,o,s=0,c=0,u=0,d=0,h=0,f=0,m=0,p=0,y=0,_=0,v=0,g=0;if(n.length<2)return[];if(n.length===2)return u=Math.sqrt(D(n[1].x-n[0].x,2)+D(n[1].y-n[0].y,2)),[{length:u,beginIndex:0,beginDistance:0,endIndex:2,endDistance:u}];for(d=Math.sqrt(D(n[1].x-n[0].x,2)+D(n[1].y-n[0].y,2)),s=1,c=n.length-1;s<c;s++)r=n[s-1],a=n[s],o=n[s+1],f=a.x-r.x,m=a.y-r.y,p=o.x-a.x,y=o.y-a.y,h=Math.sqrt(p*p+y*y),u+=d,_=Math.acos((f*p+m*y)/(d*h)),(_>e||u-g>t)&&(i.push({length:u-g,beginDistance:g,beginIndex:v,endIndex:s+1,endDistance:u}),v=s,g=u),d=h;return s-v>0&&i.push({length:u-g+h,beginIndex:v,beginDistance:g,endIndex:s+1,endDistance:u+h}),i},"linelabel");function Bn(n,e,t,i){let r=[];for(let a of n){let o=Zi(a,Math.PI/45,e);for(let s of o)if(s.length>=e+i){let c=new x(a[s.beginIndex].x,a[s.beginIndex].y),u=a[s.endIndex-1],d=new x((u.x-c.x)/s.length,(u.y-c.y)/s.length);for(let h=i;h<s.length-e;h+=t)r.push({start:c.add(d.mult(h)),end:c.add(d.mult(h+e))})}}return r}l(Bn,"simpleLabel");function Rn(n,e,t,i){let r=e.x-n.x,a=e.y-n.y,o=Math.sqrt(D(e.x-n.x,2)+D(e.y-n.y,2)),s=[];for(let c=0;c<t+i;c+=2*i){let u=c*1/o;s.push({x:n.x+u*r,y:n.y+u*a})}return s}l(Rn,"lineCells");function zt(n,e){if(n.length<=e)return[n];let t=e-1,i=n.lastIndexOf(" ",t),r=n.indexOf(" ",t);if(i===-1&&r===-1)return[n];let a,o;return r===-1||i>=0&&t-i<r-t?(a=n.substring(0,i),o=n.substring(i+1,n.length)):(a=n.substring(0,r),o=n.substring(r+1,n.length)),[a,...zt(o,e)]}l(zt,"linebreak");var Ji="\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DB5\u4E00-\u9FEA\uF900-\uFA6D\uFA70-\uFAD9\u2000",Xa=new RegExp(`^[${Ji}]+$`);var Pt=class Pt{constructor(e,t,i,r,a){this.properties={},this.extent=i,this.type=0,this.id=void 0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=a,e.readFields(Ki,this,t)}loadGeometry(){let e=this._pbf;e.pos=this._geometry;let t=e.readVarint()+e.pos,i=[],r,a=1,o=0,s=0,c=0;for(;e.pos<t;){if(o<=0){let u=e.readVarint();a=u&7,o=u>>3}if(o--,a===1||a===2)s+=e.readSVarint(),c+=e.readSVarint(),a===1&&(r&&i.push(r),r=[]),r&&r.push(new x(s,c));else if(a===7)r&&r.push(r[0].clone());else throw new Error(`unknown command ${a}`)}return r&&i.push(r),i}bbox(){let e=this._pbf;e.pos=this._geometry;let t=e.readVarint()+e.pos,i=1,r=0,a=0,o=0,s=1/0,c=-1/0,u=1/0,d=-1/0;for(;e.pos<t;){if(r<=0){let h=e.readVarint();i=h&7,r=h>>3}if(r--,i===1||i===2)a+=e.readSVarint(),o+=e.readSVarint(),a<s&&(s=a),a>c&&(c=a),o<u&&(u=o),o>d&&(d=o);else if(i!==7)throw new Error(`unknown command ${i}`)}return[s,u,c,d]}toGeoJSON(e,t,i){let r=this.extent*Math.pow(2,i),a=this.extent*e,o=this.extent*t,s=this.loadGeometry();function c(f){return[(f.x+a)*360/r-180,360/Math.PI*Math.atan(Math.exp((1-(f.y+o)*2/r)*Math.PI))-90]}l(c,"projectPoint");function u(f){return f.map(c)}l(u,"projectLine");let d;if(this.type===1){let f=[];for(let p of s)f.push(p[0]);let m=u(f);d=f.length===1?{type:"Point",coordinates:m[0]}:{type:"MultiPoint",coordinates:m}}else if(this.type===2){let f=s.map(u);d=f.length===1?{type:"LineString",coordinates:f[0]}:{type:"MultiLineString",coordinates:f}}else if(this.type===3){let f=Qi(s),m=[];for(let p of f)m.push(p.map(u));d=m.length===1?{type:"Polygon",coordinates:m[0]}:{type:"MultiPolygon",coordinates:m}}else throw new Error("unknown feature type");let h={type:"Feature",geometry:d,properties:this.properties};return this.id!=null&&(h.id=this.id),h}};l(Pt,"VectorTileFeature");var Ke=Pt;Ke.types=["Unknown","Point","LineString","Polygon"];function Ki(n,e,t){n===1?e.id=t.readVarint():n===2?Gi(t,e):n===3?e.type=t.readVarint():n===4&&(e._geometry=t.pos)}l(Ki,"readFeature");function Gi(n,e){let t=n.readVarint()+n.pos;for(;n.pos<t;){let i=e._keys[n.readVarint()],r=e._values[n.readVarint()];e.properties[i]=r}}l(Gi,"readTag");function Qi(n){let e=n.length;if(e<=1)return[n];let t=[],i,r;for(let a=0;a<e;a++){let o=er(n[a]);o!==0&&(r===void 0&&(r=o<0),r===o<0?(i&&t.push(i),i=[n[a]]):i&&i.push(n[a]))}return i&&t.push(i),t}l(Qi,"classifyRings");function er(n){let e=0;for(let t=0,i=n.length,r=i-1,a,o;t<i;r=t++)a=n[t],o=n[r],e+=(o.x-a.x)*(a.y+o.y);return e}l(er,"signedArea");var St=class St{constructor(e,t){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(tr,this,t),this.length=this._features.length}feature(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];let t=this._pbf.readVarint()+this._pbf.pos;return new Ke(this._pbf,t,this.extent,this._keys,this._values)}};l(St,"VectorTileLayer");var Lt=St;function tr(n,e,t){n===15?e.version=t.readVarint():n===1?e.name=t.readString():n===5?e.extent=t.readVarint():n===2?e._features.push(t.pos):n===3?e._keys.push(t.readString()):n===4&&e._values.push(nr(t))}l(tr,"readLayer");function nr(n){let e=null,t=n.readVarint()+n.pos;for(;n.pos<t;){let i=n.readVarint()>>3;e=i===1?n.readString():i===2?n.readFloat():i===3?n.readDouble():i===4?n.readVarint64():i===5?n.readVarint():i===6?n.readSVarint():i===7?n.readBoolean():null}return e}l(nr,"readValueMessage");var Tt=class Tt{constructor(e,t){this.layers=e.readFields(ir,{},t)}};l(Tt,"VectorTile");var Ge=Tt;function ir(n,e,t){if(n===3){let i=new Lt(t,t.readVarint()+t.pos);i.length&&(e[i.name]=i)}}l(ir,"readTile");var jn=23283064365386963e-26,rr=12,On=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8"),Ft=0,Qe=1,ze=2,et=5,Mt=class Mt{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,i=this.length){for(;this.pos<i;){let r=this.readVarint(),a=r>>3,o=this.pos;this.type=r&7,e(a,t,this),this.pos===o&&this.skip(r)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){let e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){let e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*4294967296;return this.pos+=8,e}readSFixed64(){let e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*4294967296;return this.pos+=8,e}readFloat(){let e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){let e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){let t=this.buf,i,r;return r=t[this.pos++],i=r&127,r<128||(r=t[this.pos++],i|=(r&127)<<7,r<128)||(r=t[this.pos++],i|=(r&127)<<14,r<128)||(r=t[this.pos++],i|=(r&127)<<21,r<128)?i:(r=t[this.pos],i|=(r&15)<<28,ar(i,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){let e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){let e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=rr&&On?On.decode(this.buf.subarray(t,e)):yr(this.buf,t,e)}readBytes(){let e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){let i=this.readPackedEnd();for(;this.pos<i;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){let t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===ze?this.readVarint()+this.pos:this.pos+1}skip(e){let t=e&7;if(t===Ft)for(;this.buf[this.pos++]>127;);else if(t===ze)this.pos=this.readVarint()+this.pos;else if(t===et)this.pos+=4;else if(t===Qe)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){let i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.dataView=new DataView(i.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*jn),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*jn),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){or(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;let t=this.pos;this.pos=xr(this.buf,e,this.pos);let i=this.pos-t;i>=128&&In(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){let t=e.length;this.writeVarint(t),this.realloc(t);for(let i=0;i<t;i++)this.buf[this.pos++]=e[i]}writeRawMessage(e,t){this.pos++;let i=this.pos;e(t,this);let r=this.pos-i;r>=128&&In(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r}writeMessage(e,t,i){this.writeTag(e,ze),this.writeRawMessage(t,i)}writePackedVarint(e,t){t.length&&this.writeMessage(e,cr,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,ur,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,fr,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,dr,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,hr,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,mr,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,pr,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,gr,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,br,t)}writeBytesField(e,t){this.writeTag(e,ze),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,et),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,et),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,Qe),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,Qe),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,Ft),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,Ft),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,ze),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,et),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,Qe),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}};l(Mt,"Pbf");var Le=Mt;function ar(n,e,t){let i=t.buf,r,a;if(a=i[t.pos++],r=(a&112)>>4,a<128||(a=i[t.pos++],r|=(a&127)<<3,a<128)||(a=i[t.pos++],r|=(a&127)<<10,a<128)||(a=i[t.pos++],r|=(a&127)<<17,a<128)||(a=i[t.pos++],r|=(a&127)<<24,a<128)||(a=i[t.pos++],r|=(a&1)<<31,a<128))return se(n,r,e);throw new Error("Expected varint not more than 10 bytes")}l(ar,"readVarintRemainder");function se(n,e,t){return t?e*4294967296+(n>>>0):(e>>>0)*4294967296+(n>>>0)}l(se,"toNum");function or(n,e){let t,i;if(n>=0?(t=n%4294967296|0,i=n/4294967296|0):(t=~(-n%4294967296),i=~(-n/4294967296),t^4294967295?t=t+1|0:(t=0,i=i+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),sr(t,i,e),lr(i,e)}l(or,"writeBigVarint");function sr(n,e,t){t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos++]=n&127|128,n>>>=7,t.buf[t.pos]=n&127}l(sr,"writeBigVarintLow");function lr(n,e){let t=(n&7)<<4;e.buf[e.pos++]|=t|((n>>>=3)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127|((n>>>=7)?128:0),n&&(e.buf[e.pos++]=n&127)))))}l(lr,"writeBigVarintHigh");function In(n,e,t){let i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(i);for(let r=t.pos-1;r>=n;r--)t.buf[r+i]=t.buf[r]}l(In,"makeRoomForExtraLength");function cr(n,e){for(let t=0;t<n.length;t++)e.writeVarint(n[t])}l(cr,"writePackedVarint");function ur(n,e){for(let t=0;t<n.length;t++)e.writeSVarint(n[t])}l(ur,"writePackedSVarint");function dr(n,e){for(let t=0;t<n.length;t++)e.writeFloat(n[t])}l(dr,"writePackedFloat");function hr(n,e){for(let t=0;t<n.length;t++)e.writeDouble(n[t])}l(hr,"writePackedDouble");function fr(n,e){for(let t=0;t<n.length;t++)e.writeBoolean(n[t])}l(fr,"writePackedBoolean");function mr(n,e){for(let t=0;t<n.length;t++)e.writeFixed32(n[t])}l(mr,"writePackedFixed32");function pr(n,e){for(let t=0;t<n.length;t++)e.writeSFixed32(n[t])}l(pr,"writePackedSFixed32");function gr(n,e){for(let t=0;t<n.length;t++)e.writeFixed64(n[t])}l(gr,"writePackedFixed64");function br(n,e){for(let t=0;t<n.length;t++)e.writeSFixed64(n[t])}l(br,"writePackedSFixed64");function yr(n,e,t){let i="",r=e;for(;r<t;){let a=n[r],o=null,s=a>239?4:a>223?3:a>191?2:1;if(r+s>t)break;let c,u,d;s===1?a<128&&(o=a):s===2?(c=n[r+1],(c&192)===128&&(o=(a&31)<<6|c&63,o<=127&&(o=null))):s===3?(c=n[r+1],u=n[r+2],(c&192)===128&&(u&192)===128&&(o=(a&15)<<12|(c&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):s===4&&(c=n[r+1],u=n[r+2],d=n[r+3],(c&192)===128&&(u&192)===128&&(d&192)===128&&(o=(a&15)<<18|(c&63)<<12|(u&63)<<6|d&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,s=1):o>65535&&(o-=65536,i+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),i+=String.fromCharCode(o),r+=s}return i}l(yr,"readUtf8");function xr(n,e,t){for(let i=0,r,a;i<e.length;i++){if(r=e.charCodeAt(i),r>55295&&r<57344)if(a)if(r<56320){n[t++]=239,n[t++]=191,n[t++]=189,a=r;continue}else r=a-55296<<10|r-56320|65536,a=null;else{r>56319||i+1===e.length?(n[t++]=239,n[t++]=191,n[t++]=189):a=r;continue}else a&&(n[t++]=239,n[t++]=191,n[t++]=189,a=null);r<128?n[t++]=r:(r<2048?n[t++]=r>>6|192:(r<65536?n[t++]=r>>12|224:(n[t++]=r>>18|240,n[t++]=r>>12&63|128),n[t++]=r>>6&63|128),n[t++]=r&63|128)}return t}l(xr,"writeUtf8");var ue=Math.pow,j=l((n,e,t)=>new Promise((i,r)=>{var a=l(c=>{try{s(t.next(c))}catch(u){r(u)}},"fulfilled"),o=l(c=>{try{s(t.throw(c))}catch(u){r(u)}},"rejected"),s=l(c=>c.done?i(c.value):Promise.resolve(c.value).then(a,o),"step");s((t=t.apply(n,e)).next())}),"__async"),Y=Uint8Array,ce=Uint16Array,_r=Int32Array,Yn=new Y([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Vn=new Y([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wr=new Y([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$n=l(function(n,e){for(var t=new ce(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var r=new _r(t[30]),i=1;i<30;++i)for(var a=t[i];a<t[i+1];++a)r[a]=a-t[i]<<5|i;return{b:t,r}},"freb"),Un=$n(Yn,2),Nn=Un.b,kr=Un.r;Nn[28]=258,kr[258]=28;var Hn=$n(Vn,0),vr=Hn.b,Wa=Hn.r,At=new ce(32768);for(z=0;z<32768;++z)K=(z&43690)>>1|(z&21845)<<1,K=(K&52428)>>2|(K&13107)<<2,K=(K&61680)>>4|(K&3855)<<4,At[z]=((K&65280)>>8|(K&255)<<8)>>1;var K,z,Te=l(function(n,e,t){for(var i=n.length,r=0,a=new ce(e);r<i;++r)n[r]&&++a[n[r]-1];var o=new ce(e);for(r=1;r<e;++r)o[r]=o[r-1]+a[r-1]<<1;var s;if(t){s=new ce(1<<e);var c=15-e;for(r=0;r<i;++r)if(n[r])for(var u=r<<4|n[r],d=e-n[r],h=o[n[r]-1]++<<d,f=h|(1<<d)-1;h<=f;++h)s[At[h]>>c]=u}else for(s=new ce(i),r=0;r<i;++r)n[r]&&(s[r]=At[o[n[r]-1]++]>>15-n[r]);return s},"hMap"),Fe=new Y(288);for(z=0;z<144;++z)Fe[z]=8;var z;for(z=144;z<256;++z)Fe[z]=9;var z;for(z=256;z<280;++z)Fe[z]=7;var z;for(z=280;z<288;++z)Fe[z]=8;var z,qn=new Y(32);for(z=0;z<32;++z)qn[z]=5;var z,zr=Te(Fe,9,1),Lr=Te(qn,5,1),Ct=l(function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},"max"),H=l(function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},"bits"),Dt=l(function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},"bits16"),Pr=l(function(n){return(n+7)/8|0},"shft"),Sr=l(function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var i=new Y(t-e);return i.set(n.subarray(e,t)),i},"slc"),Tr=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],X=l(function(n,e,t){var i=new Error(e||Tr[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,X),!t)throw i;return i},"err"),jt=l(function(n,e,t,i){var r=n.length,a=i?i.length:0;if(!r||e.f&&!e.l)return t||new Y(0);var o=!t||e.i!=2,s=e.i;t||(t=new Y(r*3));var c=l(function(Ln){var Pn=t.length;if(Ln>Pn){var Sn=new Y(Math.max(Pn*2,Ln));Sn.set(t),t=Sn}},"cbuf"),u=e.f||0,d=e.p||0,h=e.b||0,f=e.l,m=e.d,p=e.m,y=e.n,_=r*8;do{if(!f){u=H(n,d,1);var v=H(n,d+1,3);if(d+=3,v)if(v==1)f=zr,m=Lr,p=9,y=5;else if(v==2){var b=H(n,d,31)+257,S=H(n,d+10,15)+4,P=b+H(n,d+5,31)+1;d+=14;for(var k=new Y(P),C=new Y(19),R=0;R<S;++R)C[wr[R]]=H(n,d+R*3,7);d+=S*3;for(var te=Ct(C),_i=(1<<te)-1,wi=Te(C,te,1),R=0;R<P;){var wn=wi[H(n,d,_i)];d+=wn&15;var g=wn>>4;if(g<16)k[R++]=g;else{var ne=0,qe=0;for(g==16?(qe=3+H(n,d,3),d+=2,ne=k[R-1]):g==17?(qe=3+H(n,d,7),d+=3):g==18&&(qe=11+H(n,d,127),d+=7);qe--;)k[R++]=ne}}var kn=k.subarray(0,b),U=k.subarray(b);p=Ct(kn),y=Ct(U),f=Te(kn,p,1),m=Te(U,y,1)}else X(1);else{var g=Pr(d)+4,w=n[g-4]|n[g-3]<<8,F=g+w;if(F>r){s&&X(0);break}o&&c(h+w),t.set(n.subarray(g,F),h),e.b=h+=w,e.p=d=F*8,e.f=u;continue}if(d>_){s&&X(0);break}}o&&c(h+131072);for(var ki=(1<<p)-1,vi=(1<<y)-1,ht=d;;ht=d){var ne=f[Dt(n,d)&ki],ie=ne>>4;if(d+=ne&15,d>_){s&&X(0);break}if(ne||X(2),ie<256)t[h++]=ie;else if(ie==256){ht=d,f=null;break}else{var vn=ie-254;if(ie>264){var R=ie-257,_e=Yn[R];vn=H(n,d,(1<<_e)-1)+Nn[R],d+=_e}var ft=m[Dt(n,d)&vi],mt=ft>>4;ft||X(3),d+=ft&15;var U=vr[mt];if(mt>3){var _e=Vn[mt];U+=Dt(n,d)&(1<<_e)-1,d+=_e}if(d>_){s&&X(0);break}o&&c(h+131072);var pt=h+vn;if(h<U){var zn=a-U,zi=Math.min(U,pt);for(zn+h<0&&X(3);h<zi;++h)t[h]=i[zn+h]}for(;h<pt;h+=4)t[h]=t[h-U],t[h+1]=t[h+1-U],t[h+2]=t[h+2-U],t[h+3]=t[h+3-U];h=pt}}e.l=f,e.p=ht,e.b=h,e.f=u,f&&(u=1,e.m=p,e.d=m,e.n=y)}while(!u);return h==t.length?t:Sr(t,0,h)},"inflt"),Fr=new Y(0),Mr=l(function(n){(n[0]!=31||n[1]!=139||n[2]!=8)&&X(6,"invalid gzip data");var e=n[3],t=10;e&4&&(t+=(n[10]|n[11]<<8)+2);for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!n[t++]);return t+(e&2)},"gzs"),Cr=l(function(n){var e=n.length;return(n[e-4]|n[e-3]<<8|n[e-2]<<16|n[e-1]<<24)>>>0},"gzl"),Dr=l(function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&X(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&X(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2},"zls");function Ar(n,e){return jt(n,{i:2},e&&e.out,e&&e.dictionary)}l(Ar,"inflateSync");function Br(n,e){var t=Mr(n);return t+8>n.length&&X(6,"invalid gzip data"),jt(n.subarray(t,-8),{i:2},e&&e.out||new Y(Cr(n)),e&&e.dictionary)}l(Br,"gunzipSync");function Rr(n,e){return jt(n.subarray(Dr(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}l(Rr,"unzlibSync");function Bt(n,e){return n[0]==31&&n[1]==139&&n[2]==8?Br(n,e):(n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31?Ar(n,e):Rr(n,e)}l(Bt,"decompressSync");var jr=typeof TextDecoder!="undefined"&&new TextDecoder,Or=0;try{jr.decode(Fr,{stream:!0}),Or=1}catch(n){}var Wn=l((n,e)=>n*ue(2,e),"shift"),Pe=l((n,e)=>Math.floor(n/ue(2,e)),"unshift"),tt=l((n,e)=>Wn(n.getUint16(e+1,!0),8)+n.getUint8(e),"getUint24"),Zn=l((n,e)=>Wn(n.getUint32(e+2,!0),16)+n.getUint16(e,!0),"getUint48"),Ir=l((n,e,t,i,r)=>{if(n!==i.getUint8(r))return n-i.getUint8(r);let a=tt(i,r+1);if(e!==a)return e-a;let o=tt(i,r+4);return t!==o?t-o:0},"compare"),Er=l((n,e,t,i)=>{let r=Jn(n,e|128,t,i);return r?{z:e,x:t,y:i,offset:r[0],length:r[1],isDir:!0}:null},"queryLeafdir"),En=l((n,e,t,i)=>{let r=Jn(n,e,t,i);return r?{z:e,x:t,y:i,offset:r[0],length:r[1],isDir:!1}:null},"queryTile"),Jn=l((n,e,t,i)=>{let r=0,a=n.byteLength/17-1;for(;r<=a;){let o=a+r>>1,s=Ir(e,t,i,n,o*17);if(s>0)r=o+1;else if(s<0)a=o-1;else return[Zn(n,o*17+7),n.getUint32(o*17+13,!0)]}return null},"queryView"),Xr=l((n,e)=>n.isDir&&!e.isDir?1:!n.isDir&&e.isDir?-1:n.z!==e.z?n.z-e.z:n.x!==e.x?n.x-e.x:n.y-e.y,"entrySort"),Kn=l((n,e)=>{let t=n.getUint8(e*17);return{z:t&127,x:tt(n,e*17+1),y:tt(n,e*17+4),offset:Zn(n,e*17+7),length:n.getUint32(e*17+13,!0),isDir:t>>7===1}},"parseEntry"),Xn=l(n=>{let e=[],t=new DataView(n);for(let i=0;i<t.byteLength/17;i++)e.push(Kn(t,i));return Yr(e)},"sortDir"),Yr=l(n=>{n.sort(Xr);let e=new ArrayBuffer(17*n.length),t=new Uint8Array(e);for(let i=0;i<n.length;i++){let r=n[i],a=r.z;r.isDir&&(a=a|128),t[i*17]=a,t[i*17+1]=r.x&255,t[i*17+2]=r.x>>8&255,t[i*17+3]=r.x>>16&255,t[i*17+4]=r.y&255,t[i*17+5]=r.y>>8&255,t[i*17+6]=r.y>>16&255,t[i*17+7]=r.offset&255,t[i*17+8]=Pe(r.offset,8)&255,t[i*17+9]=Pe(r.offset,16)&255,t[i*17+10]=Pe(r.offset,24)&255,t[i*17+11]=Pe(r.offset,32)&255,t[i*17+12]=Pe(r.offset,48)&255,t[i*17+13]=r.length&255,t[i*17+14]=r.length>>8&255,t[i*17+15]=r.length>>16&255,t[i*17+16]=r.length>>24&255}return e},"createDirectory"),Vr=l((n,e)=>{if(n.byteLength<17)return null;let t=n.byteLength/17,i=Kn(n,t-1);if(i.isDir){let r=i.z,a=e.z-r,o=Math.trunc(e.x/(1<<a)),s=Math.trunc(e.y/(1<<a));return{z:r,x:o,y:s}}return null},"deriveLeaf");function $r(n){return j(this,null,function*(){let e=yield n.getBytes(0,512e3),t=new DataView(e.data),i=t.getUint32(4,!0),r=t.getUint16(8,!0),a=new TextDecoder("utf-8"),o=JSON.parse(a.decode(new DataView(e.data,10,i))),s=0;o.compression==="gzip"&&(s=2);let c=0;"minzoom"in o&&(c=+o.minzoom);let u=0;"maxzoom"in o&&(u=+o.maxzoom);let d=0,h=0,f=0,m=-180,p=-85,y=180,_=85;if(o.bounds){let g=o.bounds.split(",");m=+g[0],p=+g[1],y=+g[2],_=+g[3]}if(o.center){let g=o.center.split(",");d=+g[0],h=+g[1],f=+g[2]}return{specVersion:t.getUint16(2,!0),rootDirectoryOffset:10+i,rootDirectoryLength:r*17,jsonMetadataOffset:10,jsonMetadataLength:i,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:s,tileType:1,minZoom:c,maxZoom:u,minLon:m,minLat:p,maxLon:y,maxLat:_,centerZoom:f,centerLon:d,centerLat:h,etag:e.etag}})}l($r,"getHeader");function Ur(n,e,t,i,r,a,o){return j(this,null,function*(){let s=yield t.getArrayBuffer(e,n.rootDirectoryOffset,n.rootDirectoryLength,n);n.specVersion===1&&(s=Xn(s));let c=En(new DataView(s),i,r,a);if(c){let h=(yield e.getBytes(c.offset,c.length,o)).data,f=new DataView(h);return f.getUint8(0)===31&&f.getUint8(1)===139&&(h=Bt(new Uint8Array(h))),{data:h}}let u=Vr(new DataView(s),{z:i,x:r,y:a});if(u){let d=Er(new DataView(s),u.z,u.x,u.y);if(d){let h=yield t.getArrayBuffer(e,d.offset,d.length,n);n.specVersion===1&&(h=Xn(h));let f=En(new DataView(h),i,r,a);if(f){let p=(yield e.getBytes(f.offset,f.length,o)).data,y=new DataView(p);return y.getUint8(0)===31&&y.getUint8(1)===139&&(p=Bt(new Uint8Array(p))),{data:p}}}}})}l(Ur,"getZxy");var Gn={getHeader:$r,getZxy:Ur};function le(n,e){return(e>>>0)*4294967296+(n>>>0)}l(le,"toNum");function Nr(n,e){let t=e.buf,i=t[e.pos++],r=(i&112)>>4;if(i<128||(i=t[e.pos++],r|=(i&127)<<3,i<128)||(i=t[e.pos++],r|=(i&127)<<10,i<128)||(i=t[e.pos++],r|=(i&127)<<17,i<128)||(i=t[e.pos++],r|=(i&127)<<24,i<128)||(i=t[e.pos++],r|=(i&1)<<31,i<128))return le(n,r);throw new Error("Expected varint not more than 10 bytes")}l(Nr,"readVarintRemainder");function Se(n){let e=n.buf,t=e[n.pos++],i=t&127;return t<128||(t=e[n.pos++],i|=(t&127)<<7,t<128)||(t=e[n.pos++],i|=(t&127)<<14,t<128)||(t=e[n.pos++],i|=(t&127)<<21,t<128)?i:(t=e[n.pos],i|=(t&15)<<28,Nr(i,n))}l(Se,"readVarint");function Hr(n,e,t,i){if(i===0){t===1&&(e[0]=n-1-e[0],e[1]=n-1-e[1]);let r=e[0];e[0]=e[1],e[1]=r}}l(Hr,"rotate");var qr=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Wr(n,e,t){if(n>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>ue(2,n)-1||t>ue(2,n)-1)throw Error("tile x/y outside zoom level bounds");let i=qr[n],r=ue(2,n),a=0,o=0,s=0,c=[e,t],u=r/2;for(;u>0;)a=(c[0]&u)>0?1:0,o=(c[1]&u)>0?1:0,s+=u*u*(3*a^o),Hr(u,c,a,o),u=u/2;return i+s}l(Wr,"zxyToTileId");function Qn(n,e){return j(this,null,function*(){if(e===1||e===0)return n;if(e===2){if(typeof globalThis.DecompressionStream=="undefined")return Bt(new Uint8Array(n));let t=new Response(n).body;if(!t)throw Error("Failed to read response stream");let i=t.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(i).arrayBuffer()}throw Error("Compression method not supported")})}l(Qn,"defaultDecompress");function Zr(n){return n===1?".mvt":n===2?".png":n===3?".jpg":n===4?".webp":n===5?".avif":""}l(Zr,"tileTypeExt");var Jr=127;function Kr(n,e){let t=0,i=n.length-1;for(;t<=i;){let r=i+t>>1,a=e-n[r].tileId;if(a>0)t=r+1;else if(a<0)i=r-1;else return n[r]}return i>=0&&(n[i].runLength===0||e-n[i].tileId<n[i].runLength)?n[i]:null}l(Kr,"findTile");var de,Gr=(de=class{constructor(e,t=new Headers){this.url=e,this.customHeaders=t,this.mustReload=!1;let i="";"navigator"in globalThis&&(i=globalThis.navigator.userAgent||"");let r=i.indexOf("Windows")>-1,a=/Chrome|Chromium|Edg|OPR|Brave/.test(i);this.chromeWindowsNoCache=!1,r&&a&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,t,i,r){return j(this,null,function*(){let a,o;i?o=i:(a=new AbortController,o=a.signal);let s=new Headers(this.customHeaders);s.set("range",`bytes=${e}-${e+t-1}`);let c;this.mustReload?c="reload":this.chromeWindowsNoCache&&(c="no-store");let u=yield fetch(this.url,{signal:o,cache:c,headers:s});if(e===0&&u.status===416){let m=u.headers.get("Content-Range");if(!m||!m.startsWith("bytes */"))throw Error("Missing content-length on 416 response");let p=+m.substr(8);u=yield fetch(this.url,{signal:o,cache:"reload",headers:{range:`bytes=0-${p-1}`}})}let d=u.headers.get("Etag");if(d!=null&&d.startsWith("W/")&&(d=null),u.status===416||r&&d&&d!==r)throw this.mustReload=!0,new Rt(`Server returned non-matching ETag ${r} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(u.status>=300)throw Error(`Bad response code: ${u.status}`);let h=u.headers.get("Content-Length");if(u.status===200&&(!h||+h>t))throw a&&a.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield u.arrayBuffer(),etag:d||void 0,cacheControl:u.headers.get("Cache-Control")||void 0,expires:u.headers.get("Expires")||void 0}})}},l(de,"FetchSource"),de);function q(n,e){let t=n.getUint32(e+4,!0),i=n.getUint32(e+0,!0);return t*ue(2,32)+i}l(q,"getUint64");function Qr(n,e){let t=new DataView(n),i=t.getUint8(7);if(i>3)throw Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:q(t,8),rootDirectoryLength:q(t,16),jsonMetadataOffset:q(t,24),jsonMetadataLength:q(t,32),leafDirectoryOffset:q(t,40),leafDirectoryLength:q(t,48),tileDataOffset:q(t,56),tileDataLength:q(t,64),numAddressedTiles:q(t,72),numTileEntries:q(t,80),numTileContents:q(t,88),clustered:t.getUint8(96)===1,internalCompression:t.getUint8(97),tileCompression:t.getUint8(98),tileType:t.getUint8(99),minZoom:t.getUint8(100),maxZoom:t.getUint8(101),minLon:t.getInt32(102,!0)/1e7,minLat:t.getInt32(106,!0)/1e7,maxLon:t.getInt32(110,!0)/1e7,maxLat:t.getInt32(114,!0)/1e7,centerZoom:t.getUint8(118),centerLon:t.getInt32(119,!0)/1e7,centerLat:t.getInt32(123,!0)/1e7,etag:e}}l(Qr,"bytesToHeader");function ei(n){let e={buf:new Uint8Array(n),pos:0},t=Se(e),i=[],r=0;for(let a=0;a<t;a++){let o=Se(e);i.push({tileId:r+o,offset:0,length:0,runLength:1}),r+=o}for(let a=0;a<t;a++)i[a].runLength=Se(e);for(let a=0;a<t;a++)i[a].length=Se(e);for(let a=0;a<t;a++){let o=Se(e);o===0&&a>0?i[a].offset=i[a-1].offset+i[a-1].length:i[a].offset=o-1}return i}l(ei,"deserializeIndex");function ea(n){let e=new DataView(n);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}l(ea,"detectVersion");var he,Rt=(he=class extends Error{},l(he,"EtagMismatch"),he);function ta(n,e){return j(this,null,function*(){let t=yield n.getBytes(0,16384);if(new DataView(t.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(ea(t.data)<3)return[yield Gn.getHeader(n)];let r=t.data.slice(0,Jr),a=Qr(r,t.etag),o=t.data.slice(a.rootDirectoryOffset,a.rootDirectoryOffset+a.rootDirectoryLength),s=`${n.getKey()}|${a.etag||""}|${a.rootDirectoryOffset}|${a.rootDirectoryLength}`,c=ei(yield e(o,a.internalCompression));return[a,[s,c.length,c]]})}l(ta,"getHeaderAndRoot");function na(n,e,t,i,r){return j(this,null,function*(){let a=yield n.getBytes(t,i,void 0,r.etag),o=yield e(a.data,r.internalCompression),s=ei(o);if(s.length===0)throw new Error("Empty directory is invalid");return s})}l(na,"getDirectory");var fe,ia=(fe=class{constructor(e=100,t=!0,i=Qn){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=i}getHeader(e){return j(this,null,function*(){let t=e.getKey(),i=this.cache.get(t);if(i)return i.lastUsed=this.counter++,yield i.data;let r=new Promise((a,o)=>{ta(e,this.decompress).then(s=>{s[1]&&this.cache.set(s[1][0],{lastUsed:this.counter++,data:Promise.resolve(s[1][2])}),a(s[0]),this.prune()}).catch(s=>{o(s)})});return this.cache.set(t,{lastUsed:this.counter++,data:r}),r})}getDirectory(e,t,i,r){return j(this,null,function*(){let a=`${e.getKey()}|${r.etag||""}|${t}|${i}`,o=this.cache.get(a);if(o)return o.lastUsed=this.counter++,yield o.data;let s=new Promise((c,u)=>{na(e,this.decompress,t,i,r).then(d=>{c(d),this.prune()}).catch(d=>{u(d)})});return this.cache.set(a,{lastUsed:this.counter++,data:s}),s})}getArrayBuffer(e,t,i,r){return j(this,null,function*(){let a=`${e.getKey()}|${r.etag||""}|${t}|${i}`,o=this.cache.get(a);if(o)return o.lastUsed=this.counter++,yield o.data;let s=new Promise((c,u)=>{e.getBytes(t,i,void 0,r.etag).then(d=>{c(d.data),this.cache.has(a),this.prune()}).catch(d=>{u(d)})});return this.cache.set(a,{lastUsed:this.counter++,data:s}),s})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,t;this.cache.forEach((i,r)=>{i.lastUsed<e&&(e=i.lastUsed,t=r)}),t&&this.cache.delete(t)}}invalidate(e){return j(this,null,function*(){let t=e.getKey();if(this.invalidations.get(t))return yield this.invalidations.get(t);this.cache.delete(e.getKey());let i=new Promise((r,a)=>{this.getHeader(e).then(o=>{r(),this.invalidations.delete(t)}).catch(o=>{a(o)})});this.invalidations.set(t,i)})}},l(fe,"SharedPromiseCache"),fe),me,ti=(me=class{constructor(e,t,i){typeof e=="string"?this.source=new Gr(e):this.source=e,i?this.decompress=i:this.decompress=Qn,t?this.cache=t:this.cache=new ia}getHeader(){return j(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,t,i,r){return j(this,null,function*(){let a=Wr(e,t,i),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return Gn.getZxy(o,this.source,this.cache,e,t,i,r);if(e<o.minZoom||e>o.maxZoom)return;let s=o.rootDirectoryOffset,c=o.rootDirectoryLength;for(let u=0;u<=3;u++){let d=yield this.cache.getDirectory(this.source,s,c,o),h=Kr(d,a);if(h){if(h.runLength>0){let f=yield this.source.getBytes(o.tileDataOffset+h.offset,h.length,r,o.etag);return{data:yield this.decompress(f.data,o.tileCompression),cacheControl:f.cacheControl,expires:f.expires}}s=o.leafDirectoryOffset+h.offset,c=h.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,t,i,r){return j(this,null,function*(){try{return yield this.getZxyAttempt(e,t,i,r)}catch(a){if(a instanceof Rt)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,t,i,r);throw a}})}getMetadataAttempt(){return j(this,null,function*(){let e=yield this.cache.getHeader(this.source),t=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),i=yield this.decompress(t.data,e.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(i))})}getMetadata(){return j(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Rt)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}getTileJson(e){return j(this,null,function*(){let t=yield this.getHeader(),i=yield this.getMetadata(),r=Zr(t.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${e}/{z}/{x}/{y}${r}`],vector_layers:i.vector_layers,attribution:i.attribution,description:i.description,name:i.name,version:i.version,bounds:[t.minLon,t.minLat,t.maxLon,t.maxLat],center:[t.centerLon,t.centerLat,t.centerZoom],minzoom:t.minZoom,maxzoom:t.maxZoom}})}},l(me,"PMTiles"),me);var rt=(i=>(i[i.Point=1]="Point",i[i.Line=2]="Line",i[i.Polygon=3]="Polygon",i))(rt||{});function G(n){return`${n.x}:${n.y}:${n.z}`}l(G,"toIndex");var ra=l((n,e,t)=>{n.pos=e;let i=n.readVarint()+n.pos,r=1,a=0,o=0,s=0,c=1/0,u=-1/0,d=1/0,h=-1/0,f=[],m=[];for(;n.pos<i;){if(a<=0){let p=n.readVarint();r=p&7,a=p>>3}if(a--,r===1||r===2)o+=n.readSVarint()*t,s+=n.readSVarint()*t,o<c&&(c=o),o>u&&(u=o),s<d&&(d=s),s>h&&(h=s),r===1&&(m.length>0&&f.push(m),m=[]),m.push(new x(o,s));else if(r===7)m&&m.push(m[0].clone());else throw new Error(`unknown command ${r}`)}return m&&f.push(m),{geom:f,bbox:{minX:c,minY:d,maxX:u,maxY:h}}},"loadGeomAndBbox");function ri(n,e){let t=new Ge(new Le(n)),i=new Map;for(let[r,a]of Object.entries(t.layers)){let o=[],s=a;for(let c=0;c<s.length;c++){let u=ra(s.feature(c)._pbf,s.feature(c)._geometry,e/s.extent),d=0;for(let h of u.geom)d+=h.length;o.push({id:s.feature(c).id,geomType:s.feature(c).type,geom:u.geom,numVertices:d,bbox:u.bbox,props:s.feature(c).properties})}i.set(r,o)}return i}l(ri,"parseTile");var Et=class Et{constructor(e,t){typeof e=="string"?this.p=new ti(e):this.p=e,this.zoomaborts=[],this.shouldCancelZooms=t}get(e,t){return A(this,null,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(o=>o.z!==e.z?(o.controller.abort(),!1):!0));let i=new AbortController;this.zoomaborts.push({z:e.z,controller:i});let r=i.signal,a=yield this.p.getZxy(e.z,e.x,e.y,r);return a?ri(a.data,t):new Map})}};l(Et,"PmtilesSource");var pe=Et,Xt=class Xt{constructor(e,t){this.url=e,this.zoomaborts=[],this.shouldCancelZooms=t}get(e,t){return A(this,null,function*(){this.shouldCancelZooms&&(this.zoomaborts=this.zoomaborts.filter(o=>o.z!==e.z?(o.controller.abort(),!1):!0));let i=this.url.replace("{z}",e.z.toString()).replace("{x}",e.x.toString()).replace("{y}",e.y.toString()),r=new AbortController;this.zoomaborts.push({z:e.z,controller:r});let a=r.signal;return new Promise((o,s)=>{fetch(i,{signal:a}).then(c=>c.arrayBuffer()).then(c=>{let u=ri(c,t);o(u)}).catch(c=>{s(c)})})})}};l(Xt,"ZxySource");var Me=Xt,Ot=6378137,ni=85.0511287798,nt=Ot*Math.PI,aa=l(n=>{let e=Math.PI/180,t=Math.max(Math.min(ni,n[0]),-ni),i=Math.sin(t*e);return new x(Ot*n[1]*e,Ot*Math.log((1+i)/(1-i))/2)},"project");function ii(n){return n*n}l(ii,"sqr");function it(n,e){return ii(n.x-e.x)+ii(n.y-e.y)}l(it,"dist2");function oa(n,e,t){let i=it(e,t);if(i===0)return it(n,e);let r=((n.x-e.x)*(t.x-e.x)+(n.y-e.y)*(t.y-e.y))/i;return r=Math.max(0,Math.min(1,r)),it(n,new x(e.x+r*(t.x-e.x),e.y+r*(t.y-e.y)))}l(oa,"distToSegmentSquared");function It(n,e){let t=!1;for(let i=0,r=e.length-1;i<e.length;r=i++){let a=e[i].x,o=e[i].y,s=e[r].x,c=e[r].y;o>n.y!=c>n.y&&n.x<(s-a)*(n.y-o)/(c-o)+a&&(t=!t)}return t}l(It,"isInRing");function ai(n){let e=0;for(let t=0;t<n.length;t++){let i=(t+1)%n.length;e+=n[t].x*n[i].y,e-=n[i].x*n[t].y}return e<0}l(ai,"isCcw");function oi(n,e){let t=!1;for(let i of e)if(ai(i))It(n,i)&&(t=!1);else{if(t)return!0;It(n,i)&&(t=!0)}return t}l(oi,"pointInPolygon");function si(n,e){let t=1/0;for(let i of e){let r=Math.sqrt(it(n,i[0]));r<t&&(t=r)}return t}l(si,"pointMinDistToPoints");function li(n,e){let t=1/0;for(let i of e)for(let r=0;r<i.length-1;r++){let a=Math.sqrt(oa(n,i[r],i[r+1]));a<t&&(t=a)}return t}l(li,"pointMinDistToLines");var Yt=class Yt{constructor(e,t){this.source=e,this.cache=new Map,this.inflight=new Map,this.tileSize=t}get(e){return A(this,null,function*(){let t=G(e);return new Promise((i,r)=>{let a=this.cache.get(t);if(a)a.used=performance.now(),i(a.data);else{let o=this.inflight.get(t);o?o.push({resolve:i,reject:r}):(this.inflight.set(t,[]),this.source.get(e,this.tileSize).then(s=>{this.cache.set(t,{used:performance.now(),data:s});let c=this.inflight.get(t);if(c)for(let u of c)u.resolve(s);if(this.inflight.delete(t),i(s),this.cache.size>=64){let u=1/0,d;this.cache.forEach((h,f)=>{h.used<u&&(u=h.used,d=f)}),d&&this.cache.delete(d)}}).catch(s=>{let c=this.inflight.get(t);if(c)for(let u of c)u.reject(s);this.inflight.delete(t),r(s)}))}})})}queryFeatures(e,t,i,r){let a=aa([t,e]),o=new x((a.x+nt)/(nt*2),1-(a.y+nt)/(nt*2));o.x>1&&(o.x=o.x-Math.floor(o.x));let s=o.mult(1<<i),c=Math.floor(s.x),u=Math.floor(s.y),d=G({z:i,x:c,y:u}),h=[],f=this.cache.get(d);if(f){let m=new x((s.x-c)*this.tileSize,(s.y-u)*this.tileSize);for(let[p,y]of f.data.entries())for(let _ of y)_.geomType===1?si(m,_.geom)<r&&h.push({feature:_,layerName:p}):_.geomType===2?li(m,_.geom)<r&&h.push({feature:_,layerName:p}):oi(m,_.geom)&&h.push({feature:_,layerName:p})}return h}};l(Yt,"TileCache");var Ce=Yt;var ci=(i=>(i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=3]="Right",i))(ci||{}),ui=(c=>(c[c.N=1]="N",c[c.Ne=2]="Ne",c[c.E=3]="E",c[c.Se=4]="Se",c[c.S=5]="S",c[c.Sw=6]="Sw",c[c.W=7]="W",c[c.Nw=8]="Nw",c))(ui||{}),sa=l((n,e,t)=>{let i=document.createElement("canvas"),r=i.getContext("2d");return i.width=n,i.height=e,r!==null&&t(i,r),i},"createPattern"),Ht=class Ht{constructor(e){var t;this.pattern=e.pattern,this.fill=new B(e.fill,"black"),this.opacity=new T(e.opacity,1),this.stroke=new B(e.stroke,"black"),this.width=new T(e.width,0),this.perFeature=(t=this.fill.perFeature||this.opacity.perFeature||this.stroke.perFeature||this.width.perFeature||e.perFeature)!=null?t:!1,this.doStroke=!1}before(e,t){if(!this.perFeature){e.globalAlpha=this.opacity.get(t),e.fillStyle=this.fill.get(t),e.strokeStyle=this.stroke.get(t);let i=this.width.get(t);i>0&&(this.doStroke=!0),e.lineWidth=i}if(this.pattern){let i=e.createPattern(this.pattern,"repeat");i&&(e.fillStyle=i)}}draw(e,t,i,r){let a=!1;if(this.perFeature){e.globalAlpha=this.opacity.get(i,r),e.fillStyle=this.fill.get(i,r);let s=this.width.get(i,r);s&&(a=!0,e.strokeStyle=this.stroke.get(i,r),e.lineWidth=s)}let o=l(()=>{e.fill(),(a||this.doStroke)&&e.stroke()},"drawPath");e.beginPath();for(let s of t)for(let c=0;c<s.length;c++){let u=s[c];c===0?e.moveTo(u.x,u.y):e.lineTo(u.x,u.y)}o()}};l(Ht,"PolygonSymbolizer");var M=Ht;function la(n,e){return t=>{let i=t-n;return i>=0&&i<e.length?e[i]:0}}l(la,"arr");function ca(n,e){let t=0;for(;e[t+1][0]<n;)t++;return t}l(ca,"getStopIndex");function ua(n,e,t){return n*(t-e)+e}l(ua,"interpolate");function da(n,e,t,i){let r=i[e+1][0]-i[e][0],a=n-i[e][0];return r===0?0:t===1?a/r:(D(t,a)-1)/(D(t,r)-1)}l(da,"computeInterpolationFactor");function V(n,e){return t=>{if(e.length<1)return 0;if(t<=e[0][0])return e[0][1];if(t>=e[e.length-1][0])return e[e.length-1][1];let i=ca(t,e),r=da(t,i,n,e);return ua(r,e[i][1],e[i+1][1])}}l(V,"exp");function ha(n,e){return t=>{if(e.length<1)return 0;let i=n;for(let r=0;r<e.length;r++)t>=e[r][0]&&(i=e[r][1]);return i}}l(ha,"step");function st(n){return V(1,n)}l(st,"linear");var qt=class qt{constructor(e){var t;this.color=new B(e.color,"black"),this.width=new T(e.width),this.opacity=new T(e.opacity),this.dash=e.dash?new Je(e.dash):null,this.dashColor=new B(e.dashColor,"black"),this.dashWidth=new T(e.dashWidth,1),this.lineCap=new B(e.lineCap,"butt"),this.lineJoin=new B(e.lineJoin,"miter"),this.skip=!1,this.perFeature=!!((t=this.dash)!=null&&t.perFeature||this.color.perFeature||this.opacity.perFeature||this.width.perFeature||this.lineCap.perFeature||this.lineJoin.perFeature||e.perFeature)}before(e,t){this.perFeature||(e.strokeStyle=this.color.get(t),e.lineWidth=this.width.get(t),e.globalAlpha=this.opacity.get(t),e.lineCap=this.lineCap.get(t),e.lineJoin=this.lineJoin.get(t))}draw(e,t,i,r){if(this.skip)return;let a=l(()=>{this.perFeature&&(e.globalAlpha=this.opacity.get(i,r),e.lineCap=this.lineCap.get(i,r),e.lineJoin=this.lineJoin.get(i,r)),this.dash?(e.save(),this.perFeature?(e.lineWidth=this.dashWidth.get(i,r),e.strokeStyle=this.dashColor.get(i,r),e.setLineDash(this.dash.get(i,r))):e.setLineDash(this.dash.get(i)),e.stroke(),e.restore()):(e.save(),this.perFeature&&(e.lineWidth=this.width.get(i,r),e.strokeStyle=this.color.get(i,r)),e.stroke(),e.restore())},"strokePath");e.beginPath();for(let o of t)for(let s=0;s<o.length;s++){let c=o[s];s===0?e.moveTo(c.x,c.y):e.lineTo(c.x,c.y)}a()}};l(qt,"LineSymbolizer");var O=qt,Wt=class Wt{constructor(e){this.name=e.name,this.sheet=e.sheet,this.dpr=window.devicePixelRatio}place(e,t,i){let r=t[0],a=new x(t[0][0].x,t[0][0].y),o=this.sheet.get(this.name),s=o.w/this.dpr,c=o.h/this.dpr,u={minX:a.x-s/2,minY:a.y-c/2,maxX:a.x+s/2,maxY:a.y+c/2};return[{anchor:a,bboxes:[u],draw:l(h=>{h.globalAlpha=1,h.drawImage(this.sheet.canvas,o.x,o.y,o.w,o.h,-o.w/2/this.dpr,-o.h/2/this.dpr,o.w/2,o.h/2)},"draw")}]}};l(Wt,"IconSymbolizer");var Vt=Wt,Zt=class Zt{constructor(e){this.radius=new T(e.radius,3),this.fill=new B(e.fill,"black"),this.stroke=new B(e.stroke,"white"),this.width=new T(e.width,0),this.opacity=new T(e.opacity)}draw(e,t,i,r){e.globalAlpha=this.opacity.get(i,r);let a=this.radius.get(i,r),o=this.width.get(i,r);o>0&&(e.strokeStyle=this.stroke.get(i,r),e.lineWidth=o,e.beginPath(),e.arc(t[0][0].x,t[0][0].y,a+o/2,0,2*Math.PI),e.stroke()),e.fillStyle=this.fill.get(i,r),e.beginPath(),e.arc(t[0][0].x,t[0][0].y,a,0,2*Math.PI),e.fill()}place(e,t,i){let r=t[0],a=new x(t[0][0].x,t[0][0].y),o=this.radius.get(e.zoom,i),s={minX:a.x-o,minY:a.y-o,maxX:a.x+o,maxY:a.y+o};return[{anchor:a,bboxes:[s],draw:l(u=>{this.draw(u,[[new x(0,0)]],e.zoom,i)},"draw")}]}};l(Zt,"CircleSymbolizer");var De=Zt,Jt=class Jt{constructor(e){this.font=new oe(e),this.text=new ae(e),this.fill=new B(e.fill,"black"),this.background=new B(e.background,"white"),this.padding=new T(e.padding,0)}place(e,t,i){let r=this.text.get(e.zoom,i);if(!r)return;let a=this.font.get(e.zoom,i);e.scratch.font=a;let o=e.scratch.measureText(r),s=o.width,c=o.actualBoundingBoxAscent,u=o.actualBoundingBoxDescent,d=t[0],h=new x(t[0][0].x,t[0][0].y),f=this.padding.get(e.zoom,i),m={minX:h.x-s/2-f,minY:h.y-c-f,maxX:h.x+s/2+f,maxY:h.y+u+f};return[{anchor:h,bboxes:[m],draw:l(y=>{y.globalAlpha=1,y.fillStyle=this.background.get(e.zoom,i),y.fillRect(-s/2-f,-c-f,s+2*f,c+u+2*f),y.fillStyle=this.fill.get(e.zoom,i),y.font=a,y.fillText(r,-s/2,0)},"draw")}]}};l(Jt,"ShieldSymbolizer");var $t=Jt,Kt=class Kt{constructor(e){this.list=e}place(e,t,i){let r=this.list[0].place(e,t,i);if(!r)return;let a=r[0],o=a.anchor,s=a.bboxes[0],c=s.maxY-s.minY,u=[{draw:a.draw,translate:{x:0,y:0}}],d=[[new x(t[0][0].x,t[0][0].y+c)]];for(let f=1;f<this.list.length;f++)r=this.list[f].place(e,d,i),r&&(a=r[0],s=di(s,a.bboxes[0]),u.push({draw:a.draw,translate:{x:0,y:c}}));return[{anchor:o,bboxes:[s],draw:l(f=>{for(let m of u)f.save(),f.translate(m.translate.x,m.translate.y),m.draw(f),f.restore()},"draw")}]}};l(Kt,"FlexSymbolizer");var Ut=Kt,di=l((n,e)=>({minX:Math.min(n.minX,e.minX),minY:Math.min(n.minY,e.minY),maxX:Math.max(n.maxX,e.maxX),maxY:Math.max(n.maxY,e.maxY)}),"mergeBbox"),Gt=class Gt{constructor(e){this.list=e}place(e,t,i){let r=this.list[0];if(!r)return;let a=r.place(e,t,i);if(!a)return;let o=a[0],s=o.anchor,c=o.bboxes[0],u=[o.draw];for(let h=1;h<this.list.length;h++){if(a=this.list[h].place(e,t,i),!a)return;o=a[0],c=di(c,o.bboxes[0]),u.push(o.draw)}return[{anchor:s,bboxes:[c],draw:l(h=>{for(let f of u)f(h)},"draw")}]}};l(Gt,"GroupSymbolizer");var Ae=Gt,Qt=class Qt{constructor(e){this.symbolizer=e}place(e,t,i){let r=t[0][0],a=this.symbolizer.place(e,[[new x(0,0)]],i);if(!a||a.length===0)return;let o=a[0],s=o.bboxes[0],c=s.maxX-s.minX,u=s.maxY-s.minY,d={minX:r.x-c/2,maxX:r.x+c/2,minY:r.y-u/2,maxY:r.y+u/2};return[{anchor:r,bboxes:[d],draw:l(f=>{f.translate(-c/2,u/2-s.maxY),o.draw(f,{justify:2})},"draw")}]}};l(Qt,"CenteredSymbolizer");var at=Qt,en=class en{constructor(e,t){this.padding=new T(e,0),this.symbolizer=t}place(e,t,i){let r=this.symbolizer.place(e,t,i);if(!r||r.length===0)return;let a=this.padding.get(e.zoom,i);for(let o of r)for(let s of o.bboxes)s.minX-=a,s.minY-=a,s.maxX+=a,s.maxY+=a;return r}};l(en,"Padding");var Nt=en,tn=class tn{constructor(e){this.font=new oe(e),this.text=new ae(e),this.fill=new B(e.fill,"black"),this.stroke=new B(e.stroke,"black"),this.width=new T(e.width,0),this.lineHeight=new T(e.lineHeight,1),this.letterSpacing=new T(e.letterSpacing,0),this.maxLineCodeUnits=new T(e.maxLineChars,15),this.justify=e.justify}place(e,t,i){let r=this.text.get(e.zoom,i);if(!r)return;let a=this.font.get(e.zoom,i);e.scratch.font=a;let o=this.letterSpacing.get(e.zoom,i),s=zt(r,this.maxLineCodeUnits.get(e.zoom,i)),c="",u=0;for(let g of s)g.length>u&&(u=g.length,c=g);let d=e.scratch.measureText(c),h=d.width+o*(u-1),f=d.actualBoundingBoxAscent,m=d.actualBoundingBoxDescent,p=(f+m)*this.lineHeight.get(e.zoom,i),y=new x(t[0][0].x,t[0][0].y),_={minX:y.x,minY:y.y-f,maxX:y.x+h,maxY:y.y+m+(s.length-1)*p};return[{anchor:y,bboxes:[_],draw:l((g,w)=>{g.globalAlpha=1,g.font=a,g.fillStyle=this.fill.get(e.zoom,i);let F=this.width.get(e.zoom,i),b=0;for(let S of s){let P=0;if(this.justify===2||w&&w.justify===2?P=(h-g.measureText(S).width)/2:(this.justify===3||w&&w.justify===3)&&(P=h-g.measureText(S).width),F)if(g.lineWidth=F*2,g.strokeStyle=this.stroke.get(e.zoom,i),o>0){let k=P;for(let C of S)g.strokeText(C,k,b),k+=g.measureText(C).width+o}else g.strokeText(S,P,b);if(o>0){let k=P;for(let C of S)g.fillText(C,k,b),k+=g.measureText(C).width+o}else g.fillText(S,P,b);b+=p}},"draw")}]}};l(tn,"TextSymbolizer");var Be=tn,nn=class nn{constructor(e){this.centered=new at(new Be(e))}place(e,t,i){return this.centered.place(e,t,i)}};l(nn,"CenteredTextSymbolizer");var Q=nn,rn=class rn{constructor(e,t){var i,r,a;this.symbolizer=e,this.offsetX=new T(t.offsetX,0),this.offsetY=new T(t.offsetY,0),this.justify=(i=t.justify)!=null?i:void 0,this.placements=(r=t.placements)!=null?r:[2,6,8,4,1,3,5,7],this.ddValues=(a=t.ddValues)!=null?a:()=>({})}place(e,t,i){if(i.geomType!==1)return;let r=t[0][0],a=this.symbolizer.place(e,[[new x(0,0)]],i);if(!a||a.length===0)return;let o=a[0],s=o.bboxes[0],c=this.offsetX,u=this.offsetY,d=this.justify,h=this.placements,{offsetX:f,offsetY:m,justify:p,placements:y}=this.ddValues(e.zoom,i)||{};f&&(c=new T(f,0)),m&&(u=new T(m,0)),p&&(d=p),y&&(h=y);let _=c.get(e.zoom,i),v=u.get(e.zoom,i),g=l((P,k)=>({minX:P.x+k.x+s.minX,minY:P.y+k.y+s.minY,maxX:P.x+k.x+s.maxX,maxY:P.y+k.y+s.maxY}),"getBbox"),w=new x(_,v),F,b=l(P=>{P.translate(w.x,w.y),o.draw(P,{justify:F})},"draw"),S=l((P,k)=>{let C=g(P,k);if(!e.index.bboxCollides(C,e.order))return[{anchor:r,bboxes:[C],draw:b}]},"placeLabelInPoint");for(let P of h){let k=this.computeXaxisOffset(_,s,P),C=this.computeYaxisOffset(v,s,P);return F=this.computeJustify(d,P),w=new x(k,C),S(r,w)}}computeXaxisOffset(e,t,i){let r=t.maxX,a=r/2;return[1,5].includes(i)?e-a:[8,7,6].includes(i)?e-r:e}computeYaxisOffset(e,t,i){let r=Math.abs(t.minY),a=t.maxY,o=(t.minY+t.maxY)/2;return[3,7].includes(i)?e-o:[8,2,1].includes(i)?e-a:[6,4,5].includes(i)?e+r:e}computeJustify(e,t){return e||([1,5].includes(t)?2:[2,3,4].includes(t)?1:3)}};l(rn,"OffsetSymbolizer");var ot=rn,an=class an{constructor(e){this.symbolizer=new ot(new Be(e),e)}place(e,t,i){return this.symbolizer.place(e,t,i)}};l(an,"OffsetTextSymbolizer");var Re=an,hi=(i=>(i[i.Above=1]="Above",i[i.Center=2]="Center",i[i.Below=3]="Below",i))(hi||{}),on=class on{constructor(e){var t;this.font=new oe(e),this.text=new ae(e),this.fill=new B(e.fill,"black"),this.stroke=new B(e.stroke,"black"),this.width=new T(e.width,0),this.offset=new T(e.offset,0),this.position=(t=e.position)!=null?t:1,this.maxLabelCodeUnits=new T(e.maxLabelChars,40),this.repeatDistance=new T(e.repeatDistance,250)}place(e,t,i){let r=this.text.get(e.zoom,i);if(!r||r.length>this.maxLabelCodeUnits.get(e.zoom,i))return;let a=20,o=i.bbox;if(o.maxY-o.minY<a&&o.maxX-o.minX<a)return;let s=this.font.get(e.zoom,i);e.scratch.font=s;let c=e.scratch.measureText(r),u=c.width,d=c.actualBoundingBoxAscent+c.actualBoundingBoxDescent,h=this.repeatDistance.get(e.zoom,i);e.overzoom>4&&(h*=1<<e.overzoom-4);let f=d*2,m=Bn(t,u,h,f);if(m.length===0)return;let p=[];for(let y of m){let _=y.end.x-y.start.x,v=y.end.y-y.start.y,w=Rn(y.start,y.end,u,f/2).map(b=>({minX:b.x-f/2,minY:b.y-f/2,maxX:b.x+f/2,maxY:b.y+f/2})),F=l(b=>{b.globalAlpha=1,b.rotate(Math.atan2(v,_)),_<0&&(b.scale(-1,-1),b.translate(-u,0));let S=0;this.position===3?S+=d:this.position===2&&(S+=d/2),b.translate(0,S-this.offset.get(e.zoom,i)),b.font=s;let P=this.width.get(e.zoom,i);P&&(b.lineWidth=P,b.strokeStyle=this.stroke.get(e.zoom,i),b.strokeText(r,0,0)),b.fillStyle=this.fill.get(e.zoom,i),b.fillText(r,0,0)},"draw");p.push({anchor:y.start,bboxes:w,draw:F,deduplicationKey:r,deduplicationDistance:h})}return p}};l(on,"LineLabelSymbolizer");var ee=on;var E=l((n,e)=>{let t=n[e];return typeof t=="string"?t:""},"getString"),fi=l((n,e)=>{let t=n[e];return typeof t=="number"?t:0},"getNumber"),je=l(n=>[{dataLayer:"earth",symbolizer:new M({fill:n.earth})},...n.landcover?[{dataLayer:"landcover",symbolizer:new M({fill:l((e,t)=>{let i=n.landcover;if(!i||!t)return"";let r=E(t.props,"kind");return r==="grassland"?i.grassland:r==="barren"?i.barren:r==="urban_area"?i.urban_area:r==="farmland"?i.farmland:r==="glacier"?i.glacier:r==="scrub"?i.scrub:i.forest},"fill"),opacity:l((e,t)=>e===8?.5:1,"opacity")})}]:[],{dataLayer:"landuse",symbolizer:new M({fill:l((e,t)=>Ze(n.park_a,n.park_b,Math.min(Math.max(e/12,12),0)),"fill")}),filter:l((e,t)=>{let i=E(t.props,"kind");return["allotments","village_green","playground"].includes(i)},"filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.park_b,opacity:l((e,t)=>e<8?0:e===8?.5:1,"opacity")}),filter:l((e,t)=>{let i=E(t.props,"kind");return["national_park","park","cemetery","protected_area","nature_reserve","forest","golf_course"].includes(i)},"filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.hospital}),filter:l((e,t)=>t.props.kind==="hospital","filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.industrial}),filter:l((e,t)=>t.props.kind==="industrial","filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.school}),filter:l((e,t)=>{let i=E(t.props,"kind");return["school","university","college"].includes(i)},"filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.beach}),filter:l((e,t)=>t.props.kind==="beach","filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.zoo}),filter:l((e,t)=>t.props.kind==="zoo","filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.zoo}),filter:l((e,t)=>{let i=E(t.props,"kind");return["military","naval_base","airfield"].includes(i)},"filter")},{dataLayer:"landuse",symbolizer:new M({fill:l((e,t)=>Ze(n.wood_a,n.wood_b,Math.min(Math.max(e/12,12),0)),"fill"),opacity:l((e,t)=>e<8?0:e===8?.5:1,"opacity")}),filter:l((e,t)=>{let i=E(t.props,"kind");return["wood","nature_reserve","forest"].includes(i)},"filter")},{dataLayer:"landuse",symbolizer:new M({fill:l((e,t)=>Ze(n.scrub_a,n.scrub_b,Math.min(Math.max(e/12,12),0)),"fill")}),filter:l((e,t)=>{let i=E(t.props,"kind");return["scrub","grassland","grass"].includes(i)},"filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.scrub_b}),filter:l((e,t)=>{let i=E(t.props,"kind");return["scrub","grassland","grass"].includes(i)},"filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.glacier}),filter:l((e,t)=>t.props.kind==="glacier","filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.sand,opacity:l((e,t)=>e<8?0:e===8?.5:1,"opacity")}),filter:l((e,t)=>t.props.kind==="sand","filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.aerodrome}),filter:l((e,t)=>t.props.kind==="aerodrome","filter")},{dataLayer:"water",symbolizer:new M({fill:n.water}),filter:l((e,t)=>t.geomType===3,"filter")},{dataLayer:"roads",symbolizer:new O({color:n.runway,width:l((e,t)=>V(1.6,[[11,0],[13,4],[19,30]])(e),"width")}),filter:l((e,t)=>t.props.kind_detail==="runway","filter")},{dataLayer:"roads",symbolizer:new O({color:n.runway,width:l((e,t)=>V(1.6,[[14,0],[14.5,1],[16,6]])(e),"width")}),filter:l((e,t)=>t.props.kind_detail==="taxiway","filter")},{dataLayer:"roads",symbolizer:new O({color:n.pier,width:l((e,t)=>V(1.6,[[13,0],[13.5,0,5],[21,16]])(e),"width")}),filter:l((e,t)=>t.props.kind==="path"&&t.props.kind_detail==="pier","filter")},{dataLayer:"water",minzoom:14,symbolizer:new O({color:n.water,width:l((e,t)=>V(1.6,[[9,0],[9.5,1],[18,12]])(e),"width")}),filter:l((e,t)=>t.geomType===2&&t.props.kind==="river","filter")},{dataLayer:"water",minzoom:14,symbolizer:new O({color:n.water,width:.5}),filter:l((e,t)=>t.geomType===2&&t.props.kind==="stream","filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.pedestrian}),filter:l((e,t)=>t.props.kind==="pedestrian","filter")},{dataLayer:"landuse",symbolizer:new M({fill:n.pier}),filter:l((e,t)=>t.props.kind==="pier","filter")},{dataLayer:"buildings",symbolizer:new M({fill:n.buildings,opacity:.5})},{dataLayer:"roads",symbolizer:new O({color:n.major,width:l((e,t)=>V(1.6,[[14,0],[20,7]])(e),"width")}),filter:l((e,t)=>{let i=E(t.props,"kind");return["other","path"].includes(i)},"filter")},{dataLayer:"roads",symbolizer:new O({color:n.major,width:l((e,t)=>V(1.6,[[13,0],[18,8]])(e),"width")}),filter:l((e,t)=>t.props.kind==="minor_road","filter")},{dataLayer:"roads",symbolizer:new O({color:n.major,width:l((e,t)=>V(1.6,[[6,0],[12,1.6],[15,3],[18,13]])(e),"width")}),filter:l((e,t)=>t.props.kind==="major_road","filter")},{dataLayer:"roads",symbolizer:new O({color:n.major,width:l((e,t)=>V(1.6,[[3,0],[6,1.1],[12,1.6],[15,5],[18,15]])(e),"width")}),filter:l((e,t)=>t.props.kind==="highway","filter")},{dataLayer:"boundaries",symbolizer:new O({color:n.boundaries,width:1}),filter:l((e,t)=>{let i=t.props.kind_detail;return typeof i=="number"&&i<=2},"filter")},{dataLayer:"roads",symbolizer:new O({dash:[.3,.75],color:n.railway,dashWidth:l((e,t)=>V(1.6,[[4,0],[7,.15],[19,9]])(e),"dashWidth"),opacity:.5}),filter:l((e,t)=>t.props.kind==="rail","filter")},{dataLayer:"boundaries",symbolizer:new O({color:n.boundaries,width:.5}),filter:l((e,t)=>{let i=t.props.kind_detail;return typeof i=="number"&&i>2},"filter")}],"paintRules"),Oe=l((n,e)=>{let t=[`name:${e}`,"name"];return[{dataLayer:"roads",symbolizer:new ee({labelProps:t,fill:n.roads_label_minor,font:"400 12px sans-serif",width:2,stroke:n.roads_label_minor_halo}),minzoom:16,filter:l((i,r)=>{let a=E(r.props,"kind");return["minor_road","other","path"].includes(a)},"filter")},{dataLayer:"roads",symbolizer:new ee({labelProps:t,fill:n.roads_label_major,font:"400 12px sans-serif",width:2,stroke:n.roads_label_major_halo}),minzoom:12,filter:l((i,r)=>{let a=E(r.props,"kind");return["highway","major_road"].includes(a)},"filter")},{dataLayer:"roads",symbolizer:new ee({labelProps:t,fill:n.roads_label_major,font:"400 12px sans-serif",width:2,stroke:n.roads_label_major_halo}),minzoom:12,filter:l((i,r)=>{let a=E(r.props,"kind");return["highway","major_road"].includes(a)},"filter")},{dataLayer:"water",symbolizer:new Q({labelProps:t,fill:n.ocean_label,lineHeight:1.5,letterSpacing:1,font:l((i,r)=>`400 ${st([[3,10],[10,12]])(i)}px sans-serif`,"font"),textTransform:"uppercase"}),filter:l((i,r)=>{let a=E(r.props,"kind");return r.geomType===1&&["ocean","bay","strait","fjord"].includes(a)},"filter")},{dataLayer:"water",symbolizer:new Q({labelProps:t,fill:n.ocean_label,lineHeight:1.5,letterSpacing:1,font:l((i,r)=>`400 ${st([[3,10],[6,12],[10,12]])(i)}px sans-serif`,"font")}),filter:l((i,r)=>{let a=E(r.props,"kind");return r.geomType===1&&["sea","lake","water"].includes(a)},"filter")},{dataLayer:"places",symbolizer:new Q({labelProps:l((i,r)=>i<6?[`ref:${e}`,"ref"]:t,"labelProps"),fill:n.state_label,stroke:n.state_label_halo,width:1,lineHeight:1.5,font:l((i,r)=>"400 12px sans-serif","font"),textTransform:"uppercase"}),filter:l((i,r)=>r.props.kind==="region","filter")},{dataLayer:"places",symbolizer:new Q({labelProps:t,fill:n.country_label,lineHeight:1.5,font:l((i,r)=>(i<6,"600 12px sans-serif"),"font"),textTransform:"uppercase"}),filter:l((i,r)=>r.props.kind==="country","filter")},{dataLayer:"places",minzoom:9,symbolizer:new Q({labelProps:t,fill:n.city_label,lineHeight:1.5,font:l((i,r)=>{if(!r)return"400 12px sans-serif";let a=r.props.min_zoom,o=400;a&&a<=5&&(o=600);let s=12,c=r.props.population_rank;return c&&c>9&&(s=16),`${o} ${s}px sans-serif`},"font")}),sort:l((i,r)=>{let a=fi(i,"min_zoom"),o=fi(r,"min_zoom");return a-o},"sort"),filter:l((i,r)=>r.props.kind==="locality","filter")},{dataLayer:"places",maxzoom:8,symbolizer:new Ae([new De({radius:2,fill:n.city_label,stroke:n.city_label_halo,width:1.5}),new Re({labelProps:t,fill:n.city_label,stroke:n.city_label_halo,width:1,offsetX:6,offsetY:4.5,font:l((i,r)=>"400 12px sans-serif","font")})]),filter:l((i,r)=>r.props.kind==="locality","filter")}]},"labelRules");function sn(n,e,t,i,r){mi(n,e,t||0,i||n.length-1,r||fa)}l(sn,"quickselect");function mi(n,e,t,i,r){for(;i>t;){if(i-t>600){var a=i-t+1,o=e-t+1,s=Math.log(a),c=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*c*(a-c)/a)*(o-a/2<0?-1:1),d=Math.max(t,Math.floor(e-o*c/a+u)),h=Math.min(i,Math.floor(e+(a-o)*c/a+u));mi(n,e,d,h,r)}var f=n[e],m=t,p=i;for(Ie(n,t,e),r(n[i],f)>0&&Ie(n,t,i);m<p;){for(Ie(n,m,p),m++,p--;r(n[m],f)<0;)m++;for(;r(n[p],f)>0;)p--}r(n[t],f)===0?Ie(n,t,p):(p++,Ie(n,p,i)),p<=e&&(t=p+1),e<=p&&(i=p-1)}}l(mi,"quickselectStep");function Ie(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}l(Ie,"swap");function fa(n,e){return n<e?-1:n>e?1:0}l(fa,"defaultCompare");var un=class un{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data,i=[];if(!ct(e,t))return i;let r=this.toBBox,a=[];for(;t;){for(let o=0;o<t.children.length;o++){let s=t.children[o],c=t.leaf?r(s):s;ct(e,c)&&(t.leaf?i.push(s):cn(e,c)?this._all(s,i):a.push(s))}t=a.pop()}return i}collides(e){let t=this.data;if(!ct(e,t))return!1;let i=[];for(;t;){for(let r=0;r<t.children.length;r++){let a=t.children[r],o=t.leaf?this.toBBox(a):a;if(ct(e,o)){if(t.leaf||cn(e,o))return!0;i.push(a)}}t=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){let i=this.data;this.data=t,t=i}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=be([]),this}remove(e,t){if(!e)return this;let i=this.data,r=this.toBBox(e),a=[],o=[],s,c,u;for(;i||a.length;){if(i||(i=a.pop(),c=a[a.length-1],s=o.pop(),u=!0),i.leaf){let d=ma(e,i.children,t);if(d!==-1)return i.children.splice(d,1),a.push(i),this._condense(a),this}!u&&!i.leaf&&cn(i,r)?(a.push(i),o.push(s),s=0,c=i,i=i.children[0]):c?(s++,i=c.children[s],u=!1):i=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){let i=[];for(;e;)e.leaf?t.push(...e.children):i.push(...e.children),e=i.pop();return t}_build(e,t,i,r){let a=i-t+1,o=this._maxEntries,s;if(a<=o)return s=be(e.slice(t,i+1)),ge(s,this.toBBox),s;r||(r=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,r-1))),s=be([]),s.leaf=!1,s.height=r;let c=Math.ceil(a/o),u=c*Math.ceil(Math.sqrt(o));pi(e,t,i,u,this.compareMinX);for(let d=t;d<=i;d+=u){let h=Math.min(d+u-1,i);pi(e,d,h,c,this.compareMinY);for(let f=d;f<=h;f+=c){let m=Math.min(f+c-1,h);s.children.push(this._build(e,f,m,r-1))}}return ge(s,this.toBBox),s}_chooseSubtree(e,t,i,r){for(;r.push(t),!(t.leaf||r.length-1===i);){let a=1/0,o=1/0,s;for(let c=0;c<t.children.length;c++){let u=t.children[c],d=ln(u),h=ba(e,u)-d;h<o?(o=h,a=d<a?d:a,s=u):h===o&&d<a&&(a=d,s=u)}t=s||t.children[0]}return t}_insert(e,t,i){let r=i?e:this.toBBox(e),a=[],o=this._chooseSubtree(r,this.data,t,a);for(o.children.push(e),Xe(o,r);t>=0&&a[t].children.length>this._maxEntries;)this._split(a,t),t--;this._adjustParentBBoxes(r,a,t)}_split(e,t){let i=e[t],r=i.children.length,a=this._minEntries;this._chooseSplitAxis(i,a,r);let o=this._chooseSplitIndex(i,a,r),s=be(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,ge(i,this.toBBox),ge(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(i,s)}_splitRoot(e,t){this.data=be([e,t]),this.data.height=e.height+1,this.data.leaf=!1,ge(this.data,this.toBBox)}_chooseSplitIndex(e,t,i){let r,a=1/0,o=1/0;for(let s=t;s<=i-t;s++){let c=Ee(e,0,s,this.toBBox),u=Ee(e,s,i,this.toBBox),d=ya(c,u),h=ln(c)+ln(u);d<a?(a=d,r=s,o=h<o?h:o):d===a&&h<o&&(o=h,r=s)}return r||i-t}_chooseSplitAxis(e,t,i){let r=e.leaf?this.compareMinX:pa,a=e.leaf?this.compareMinY:ga,o=this._allDistMargin(e,t,i,r),s=this._allDistMargin(e,t,i,a);o<s&&e.children.sort(r)}_allDistMargin(e,t,i,r){e.children.sort(r);let a=this.toBBox,o=Ee(e,0,t,a),s=Ee(e,i-t,i,a),c=lt(o)+lt(s);for(let u=t;u<i-t;u++){let d=e.children[u];Xe(o,e.leaf?a(d):d),c+=lt(o)}for(let u=i-t-1;u>=t;u--){let d=e.children[u];Xe(s,e.leaf?a(d):d),c+=lt(s)}return c}_adjustParentBBoxes(e,t,i){for(let r=i;r>=0;r--)Xe(t[r],e)}_condense(e){for(let t=e.length-1,i;t>=0;t--)e[t].children.length===0?t>0?(i=e[t-1].children,i.splice(i.indexOf(e[t]),1)):this.clear():ge(e[t],this.toBBox)}};l(un,"RBush");var Ye=un;function ma(n,e,t){if(!t)return e.indexOf(n);for(let i=0;i<e.length;i++)if(t(n,e[i]))return i;return-1}l(ma,"findItem");function ge(n,e){Ee(n,0,n.children.length,e,n)}l(ge,"calcBBox");function Ee(n,e,t,i,r){r||(r=be(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let a=e;a<t;a++){let o=n.children[a];Xe(r,n.leaf?i(o):o)}return r}l(Ee,"distBBox");function Xe(n,e){return n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY),n}l(Xe,"extend");function pa(n,e){return n.minX-e.minX}l(pa,"compareNodeMinX");function ga(n,e){return n.minY-e.minY}l(ga,"compareNodeMinY");function ln(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}l(ln,"bboxArea");function lt(n){return n.maxX-n.minX+(n.maxY-n.minY)}l(lt,"bboxMargin");function ba(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}l(ba,"enlargedArea");function ya(n,e){let t=Math.max(n.minX,e.minX),i=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),a=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,a-i)}l(ya,"intersectionArea");function cn(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}l(cn,"contains");function ct(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}l(ct,"intersects");function be(n){return{children:n,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}l(be,"createNode");function pi(n,e,t,i,r){let a=[e,t];for(;a.length;){if(t=a.pop(),e=a.pop(),t-e<=i)continue;let o=e+Math.ceil((t-e)/i/2)*i;sn(n,o,e,t,r),a.push(e,o,o,t)}}l(pi,"multiSelect");var $e=l((n,e,t)=>{let i=[];for(let r of n){let a=[];for(let o of r)a.push(o.clone().mult(e).add(t));i.push(a)}return i},"transformGeom"),Ve=l((n,e)=>{let t=1<<e;return n<0?t+n:n>=t?n%t:n},"wrap"),dn=class dn{constructor(e,t,i){this.tileCache=e,this.maxDataLevel=t,this.levelDiff=i}dataTilesForBounds(e,t){let i=D(2,e)/D(2,Math.ceil(e)),r=[],a=1,o=this.tileCache.tileSize;if(e<this.levelDiff)a=1/(1<<this.levelDiff-e)*i,r.push({dataTile:{z:0,x:0,y:0},origin:new x(0,0),scale:a,dim:o*a});else if(e<=this.levelDiff+this.maxDataLevel){let s=1<<this.levelDiff,c=256*i,u=Math.ceil(e)-this.levelDiff,d=Math.floor(t.minX/s/c),h=Math.floor(t.minY/s/c),f=Math.floor(t.maxX/s/c),m=Math.floor(t.maxY/s/c);for(let p=d;p<=f;p++)for(let y=h;y<=m;y++){let _=new x(p*s*c,y*s*c);r.push({dataTile:{z:u,x:Ve(p,u),y:Ve(y,u)},origin:_,scale:i,dim:o*i})}}else{let s=1<<this.levelDiff;a=(1<<Math.ceil(e)-this.maxDataLevel-this.levelDiff)*i;let c=Math.floor(t.minX/s/256/a),u=Math.floor(t.minY/s/256/a),d=Math.floor(t.maxX/s/256/a),h=Math.floor(t.maxY/s/256/a);for(let f=c;f<=d;f++)for(let m=u;m<=h;m++){let p=new x(f*s*256*a,m*s*256*a);r.push({dataTile:{z:this.maxDataLevel,x:Ve(f,this.maxDataLevel),y:Ve(m,this.maxDataLevel)},origin:p,scale:a,dim:o*a})}}return r}dataTileForDisplayTile(e){let t,i=1,r=this.tileCache.tileSize,a;if(e.z<this.levelDiff)t={z:0,x:0,y:0},i=1/(1<<this.levelDiff-e.z),a=new x(0,0),r=r*i;else if(e.z<=this.levelDiff+this.maxDataLevel){let o=1<<this.levelDiff;t={z:e.z-this.levelDiff,x:Math.floor(e.x/o),y:Math.floor(e.y/o)},a=new x(t.x*o*256,t.y*o*256)}else{i=1<<e.z-this.maxDataLevel-this.levelDiff;let o=1<<this.levelDiff;t={z:this.maxDataLevel,x:Math.floor(e.x/o/i),y:Math.floor(e.y/o/i)},a=new x(t.x*o*i*256,t.y*o*i*256),r=r*i}return{dataTile:t,scale:i,origin:a,dim:r}}getBbox(e,t){return A(this,null,function*(){let i=this.dataTilesForBounds(e,t);return(yield Promise.all(i.map(a=>this.tileCache.get(a.dataTile)))).map((a,o)=>{let s=i[o];return{data:a,z:e,dataTile:s.dataTile,scale:s.scale,dim:s.dim,origin:s.origin}})})}getDisplayTile(e){return A(this,null,function*(){let t=this.dataTileForDisplayTile(e);return{data:yield this.tileCache.get(t.dataTile),z:e.z,dataTile:t.dataTile,scale:t.scale,origin:t.origin,dim:t.dim}})}queryFeatures(e,t,i,r){let a=Math.round(i),o=Math.min(a-this.levelDiff,this.maxDataLevel),s=r/(1<<a-o);return this.tileCache.queryFeatures(e,t,o,s)}};l(dn,"View");var ut=dn,Ue=l(n=>{let e=l(i=>{let r=i.levelDiff===void 0?1:i.levelDiff,a=i.maxDataZoom||15,o;if(typeof i.url=="string")new URL(i.url,"http://example.com").pathname.endsWith(".pmtiles")?o=new pe(i.url,!0):o=new Me(i.url,!0);else if(i.url)o=new pe(i.url,!0);else throw new Error(`Invalid source ${i.url}`);let s=new Ce(o,256*1<<r);return new ut(s,a,r)},"sourceToViews"),t=new Map;if(n.sources)for(let i in n.sources)t.set(i,e(n.sources[i]));else t.set("",e(n));return t},"sourcesToViews");var gi=l((n,e,t)=>{let r=e/256,a=Math.floor(t.minX/256),o=Math.floor(t.minY/256),s=Math.floor(t.maxX/256),c=Math.floor(t.maxY/256),u=Math.log2(r),d=[];for(let h=a;h<=s;h++){let f=h%(1<<n);for(let m=o;m<=c;m++)d.push({display:G({z:n,x:f,y:m}),key:G({z:n-u,x:Math.floor(f/r),y:Math.floor(m/r)})})}return d},"covering"),hn=class hn{constructor(e,t){this.tree=new Ye,this.current=new Map,this.dim=e,this.maxLabeledTiles=t}hasPrefix(e){for(let t of this.current.keys())if(t.startsWith(e))return!0;return!1}has(e){return this.current.has(e)}size(){return this.current.size}keys(){return this.current.keys()}searchBbox(e,t){let i=new Set;for(let r of this.tree.search(e))r.indexedLabel.order<=t&&i.add(r.indexedLabel);return i}searchLabel(e,t){let i=new Set;for(let r of e.bboxes)for(let a of this.tree.search(r))a.indexedLabel.order<=t&&i.add(a.indexedLabel);return i}bboxCollides(e,t){for(let i of this.tree.search(e))if(i.indexedLabel.order<=t)return!0;return!1}labelCollides(e,t){for(let i of e.bboxes)for(let r of this.tree.search(i))if(r.indexedLabel.order<=t)return!0;return!1}deduplicationCollides(e){if(!e.deduplicationKey||!e.deduplicationDistance)return!1;let t=e.deduplicationDistance,i={minX:e.anchor.x-t,minY:e.anchor.y-t,maxX:e.anchor.x+t,maxY:e.anchor.y+t};for(let r of this.tree.search(i))if(r.indexedLabel.deduplicationKey===e.deduplicationKey&&r.indexedLabel.anchor.dist(e.anchor)<t)return!0;return!1}makeEntry(e){this.current.get(e)&&console.log("consistency error 1");let t=new Set;this.current.set(e,t)}insert(e,t,i){let r={anchor:e.anchor,bboxes:e.bboxes,draw:e.draw,order:t,tileKey:i,deduplicationKey:e.deduplicationKey,deduplicationDistance:e.deduplicationDistance},a=this.current.get(i);if(!a){let c=new Set;this.current.set(i,c),a=c}a.add(r);let o=!1,s=!1;for(let c of e.bboxes)this.tree.insert({minX:c.minX,minY:c.minY,maxX:c.maxX,maxY:c.maxY,indexedLabel:r}),c.minX<0&&(o=!0),c.maxX>this.dim&&(s=!0);if(o||s){let c=o?this.dim:-this.dim,u=[];for(let f of e.bboxes)u.push({minX:f.minX+c,minY:f.minY,maxX:f.maxX+c,maxY:f.maxY});let d={anchor:new x(e.anchor.x+c,e.anchor.y),bboxes:u,draw:e.draw,order:t,tileKey:i},h=this.current.get(i);h&&h.add(d);for(let f of u)this.tree.insert({minX:f.minX,minY:f.minY,maxX:f.maxX,maxY:f.maxY,indexedLabel:d})}}pruneOrNoop(e){let t=e.split(":"),i,r=0,a=0;for(let o of this.current.keys()){let s=o.split(":");if(s[3]===t[3]){a++;let c=Math.sqrt(D(+s[0]-+t[0],2)+D(+s[1]-+t[1],2));c>r&&(r=c,i=o)}i&&a>this.maxLabeledTiles&&this.pruneKey(i)}}pruneKey(e){let t=this.current.get(e);if(!t)return;let i=[];for(let r of this.tree.all())t.has(r.indexedLabel)&&i.push(r);for(let r of i)this.tree.remove(r);this.current.delete(e)}removeLabel(e){let t=[];for(let r of this.tree.all())e===r.indexedLabel&&t.push(r);for(let r of t)this.tree.remove(r);let i=this.current.get(e.tileKey);i&&i.delete(e)}};l(hn,"Index");var dt=hn,fn=class fn{constructor(e,t,i,r,a){this.index=new dt(256*1<<e,r),this.z=e,this.scratch=t,this.labelRules=i,this.callback=a}layout(e){let t=performance.now(),i=new Set;for(let[a,o]of e)for(let s of o){let c=`${G(s.dataTile)}:${a}`;this.index.has(c)||(this.index.makeEntry(c),i.add(c))}let r=new Set;for(let[a,o]of this.labelRules.entries()){if(o.visible===!1||o.minzoom&&this.z<o.minzoom||o.maxzoom&&this.z>o.maxzoom)continue;let s=o.dataSource||"",c=e.get(s);if(c)for(let u of c){let d=`${G(u.dataTile)}:${s}`;if(!i.has(d))continue;let h=u.data.get(o.dataLayer);if(h===void 0)continue;let f=h;o.sort&&f.sort((p,y)=>o.sort?o.sort(p.props,y.props):0);let m={index:this.index,zoom:this.z,scratch:this.scratch,order:a,overzoom:this.z-u.dataTile.z};for(let p of f){if(o.filter&&!o.filter(this.z,p))continue;let y=$e(p.geom,u.scale,u.origin),_=o.symbolizer.place(m,y,p);if(_)for(let v of _){let g=!1;if(!(v.deduplicationKey&&this.index.deduplicationCollides(v))){if(this.index.labelCollides(v,1/0)){if(!this.index.labelCollides(v,a)){let w=this.index.searchLabel(v,1/0);for(let F of w){this.index.removeLabel(F);for(let b of F.bboxes)this.findInvalidatedTiles(r,u.dim,b,d)}this.index.insert(v,a,d),g=!0}}else this.index.insert(v,a,d),g=!0;if(g)for(let w of v.bboxes)(w.maxX>u.origin.x+u.dim||w.minX<u.origin.x||w.minY<u.origin.y||w.maxY>u.origin.y+u.dim)&&this.findInvalidatedTiles(r,u.dim,w,d)}}}}}for(let a of i)this.index.pruneOrNoop(a);return r.size>0&&this.callback&&this.callback(r),performance.now()-t}findInvalidatedTiles(e,t,i,r){let a=gi(this.z,t,i);for(let o of a)o.key!==r&&this.index.hasPrefix(o.key)&&e.add(o.display)}add(e){let t=!0;for(let[r,a]of e)for(let o of a)this.index.has(`${G(o.dataTile)}:${r}`)||(t=!1);return t?0:this.layout(e)}};l(fn,"Labeler");var ye=fn,mn=class mn{constructor(e,t,i,r){this.labelers=new Map,this.scratch=e,this.labelRules=t,this.maxLabeledTiles=i,this.callback=r}add(e,t){let i=this.labelers.get(e);return i||(i=new ye(e,this.scratch,this.labelRules,this.maxLabeledTiles,this.callback),this.labelers.set(e,i)),i.add(t)}getIndex(e){let t=this.labelers.get(e);if(t)return t.index}};l(mn,"Labelers");var xe=mn;function Ne(n,e,t,i,r,a,o,s,c){let u=performance.now();n.save(),n.miterLimit=2;for(let d of r){if(d.minzoom&&e<d.minzoom||d.maxzoom&&e>d.maxzoom)continue;let h=t.get(d.dataSource||"");if(h)for(let f of h){let m=f.data.get(d.dataLayer);if(m===void 0)continue;d.symbolizer.before&&d.symbolizer.before(n,f.z);let p=f.origin,y=f.dim,_=f.scale;if(n.save(),s){n.beginPath();let v=Math.max(p.x-o.x,a.minX-o.x),g=Math.max(p.y-o.y,a.minY-o.y),w=Math.min(p.x-o.x+y,a.maxX-o.x),F=Math.min(p.y-o.y+y,a.maxY-o.y);n.rect(v,g,w-v,F-g),n.clip()}n.translate(p.x-o.x,p.y-o.y);for(let v of m){let g=v.geom,w=v.bbox;w.maxX*_+p.x<a.minX||w.minX*_+p.x>a.maxX||w.minY*_+p.y>a.maxY||w.maxY*_+p.y<a.minY||d.filter&&!d.filter(f.z,v)||(_!==1&&(g=$e(g,_,new x(0,0))),d.symbolizer.draw(n,g,f.z,v))}n.restore()}}if(s&&(n.beginPath(),n.rect(a.minX-o.x,a.minY-o.y,a.maxX-a.minX,a.maxY-a.minY),n.clip()),i){let d=i.searchBbox(a,1/0);for(let h of d)if(n.save(),n.translate(h.anchor.x-o.x,h.anchor.y-o.y),h.draw(n),n.restore(),c){n.lineWidth=.5,n.strokeStyle=c,n.fillStyle=c,n.globalAlpha=1,n.fillRect(h.anchor.x-o.x-2,h.anchor.y-o.y-2,4,4);for(let f of h.bboxes)n.strokeRect(f.minX-o.x,f.minY-o.y,f.maxX-f.minX,f.maxY-f.minY)}}return n.restore(),performance.now()-u}l(Ne,"paint");var He=6378137,bi=85.0511287798,$=He*Math.PI,yi=l(n=>{let e=Math.PI/180,t=Math.max(Math.min(bi,n.y),-bi),i=Math.sin(t*e);return new x(He*n.x*e,He*Math.log((1+i)/(1-i))/2)},"project"),xa=l(n=>{let e=180/Math.PI;return{lat:(2*Math.atan(Math.exp(n.y/He))-Math.PI/2)*e,lng:n.x*e/He}},"unproject"),_a=l((n,e)=>t=>{let i=yi(t);return new x((i.x+$)/($*2),1-(i.y+$)/($*2)).mult(D(2,e)*256).sub(n)},"instancedProject"),wa=l((n,e)=>t=>{let i=new x(t.x,t.y).add(n).div(D(2,e)*256),r=new x(i.x*($*2)-$,(1-i.y)*($*2)-$);return xa(r)},"instancedUnproject"),pn=l((n,e)=>{let t=e*(360/n);return Math.log2(t/256)},"getZoom"),bn=class bn{constructor(e){if(e.flavor){let t=we(e.flavor);this.paintRules=je(t),this.labelRules=Oe(t,e.lang||"en"),this.backgroundColor=t.background}else this.paintRules=e.paintRules||[],this.labelRules=e.labelRules||[],this.backgroundColor=e.backgroundColor;this.views=Ue(e),this.debug=e.debug||""}drawContext(e,t,i,r,a){return A(this,null,function*(){let o=yi(r),c=new x((o.x+$)/($*2),1-(o.y+$)/($*2)).clone().mult(D(2,a)*256).sub(new x(t/2,i/2)),u={minX:c.x,minY:c.y,maxX:c.x+t,maxY:c.y+i},d=[];for(let[g,w]of this.views){let F=w.getBbox(a,u);d.push({key:g,promise:F})}let h=yield Promise.all(d.map(g=>g.promise.then(w=>({status:"fulfilled",value:w,key:g.key}),w=>({status:"rejected",value:[],reason:w,key:g.key})))),f=new Map;for(let g of h)g.status==="fulfilled"&&f.set(g.key,g.value);let m=performance.now(),p=new ye(a,e,this.labelRules,16,void 0),y=p.add(f);this.backgroundColor&&(e.save(),e.fillStyle=this.backgroundColor,e.fillRect(0,0,t,i),e.restore());let _=this.paintRules,v=Ne(e,a,f,p.index,_,u,c,!0,this.debug);if(this.debug){e.save(),e.translate(-c.x,-c.y),e.strokeStyle=this.debug,e.fillStyle=this.debug,e.font="12px sans-serif";let g=0;for(let[w,F]of f){for(let b of F){e.strokeRect(b.origin.x,b.origin.y,b.dim,b.dim);let S=b.dataTile;e.fillText(`${w+(w?" ":"")+S.z} ${S.x} ${S.y}`,b.origin.x+4,b.origin.y+14*(1+g))}g++}e.restore()}return{elapsed:performance.now()-m,project:_a(c,a),unproject:wa(c,a)}})}drawCanvas(a,o,s){return A(this,arguments,function*(e,t,i,r={}){let c=window.devicePixelRatio,u=e.clientWidth,d=e.clientHeight;e.width===u*c&&e.height===d*c||(e.width=u*c,e.height=d*c),r.lang&&(e.lang=r.lang);let h=e.getContext("2d");if(!h){console.error("Failed to initialize canvas2d context.");return}return h.setTransform(c,0,0,c,0,0),this.drawContext(h,u,d,t,i)})}drawContextBounds(e,t,i,r,a){return A(this,null,function*(){let o=i.x-t.x,s=new x((t.x+i.x)/2,(t.y+i.y)/2);return this.drawContext(e,r,a,s,pn(o,r))})}drawCanvasBounds(o,s,c,u){return A(this,arguments,function*(e,t,i,r,a={}){let d=i.x-t.x,h=new x((t.x+i.x)/2,(t.y+i.y)/2);return this.drawCanvas(e,h,pn(d,r),a)})}};l(bn,"Static");var gn=bn;var ka=l(n=>new Promise(e=>{setTimeout(()=>{e()},n)}),"timer"),va=l(n=>n.then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e})),"reflect"),za=l((n={})=>{let t=class t extends L.GridLayer{constructor(r={}){if(r.noWrap&&!r.bounds&&(r.bounds=[[-90,-180],[90,180]]),r.attribution==null&&(r.attribution='<a href="https://protomaps.com">Protomaps</a> \xA9 <a href="https://openstreetmap.org/copyright">OpenStreetMap</a>'),super(r),r.flavor){let o=we(r.flavor);this.paintRules=je(o),this.labelRules=Oe(o,r.lang||"en"),this.backgroundColor=o.background}else this.paintRules=r.paintRules||[],this.labelRules=r.labelRules||[],this.backgroundColor=r.backgroundColor;this.lastRequestedZ=void 0,this.tasks=r.tasks||[],this.views=Ue(r),this.debug=r.debug;let a=document.createElement("canvas").getContext("2d");this.scratch=a,this.onTilesInvalidated=o=>{for(let s of o)this.rerenderTile(s)},this.labelers=new xe(this.scratch,this.labelRules,16,this.onTilesInvalidated),this.tileSize=256*window.devicePixelRatio,this.tileDelay=r.tileDelay||3,this.lang=r.lang}renderTile(r,a,o,s=()=>{}){return A(this,null,function*(){this.lastRequestedZ=r.z;let c=[];for(let[k,C]of this.views){let R=C.getDisplayTile(r);c.push({key:k,promise:R})}let u=yield Promise.all(c.map(k=>k.promise.then(C=>({status:"fulfilled",value:C,key:k.key}),C=>({status:"rejected",reason:C,key:k.key})))),d=new Map;for(let k of u)k.status==="fulfilled"?d.set(k.key,[k.value]):k.reason.name==="AbortError"||console.error(k.reason);if(a.key!==o||this.lastRequestedZ!==r.z||(yield Promise.all(this.tasks.map(va)),a.key!==o)||this.lastRequestedZ!==r.z)return;let h=this.labelers.add(r.z,d);if(a.key!==o||this.lastRequestedZ!==r.z)return;let f=this.labelers.getIndex(r.z);if(!this._map)return;let m=this._map.getCenter().wrap(),p=this._getTiledPixelBounds(m),_=this._pxBoundsToTileRange(p).getCenter(),v=r.distanceTo(_)*this.tileDelay;if(yield ka(v),a.key!==o||this.lastRequestedZ!==r.z)return;let g=16,w={minX:256*r.x-g,minY:256*r.y-g,maxX:256*(r.x+1)+g,maxY:256*(r.y+1)+g},F=new x(256*r.x,256*r.y);a.width=this.tileSize,a.height=this.tileSize;let b=a.getContext("2d");if(!b){console.error("Failed to get Canvas context");return}b.setTransform(this.tileSize/256,0,0,this.tileSize/256,0,0),b.clearRect(0,0,256,256),this.backgroundColor&&(b.save(),b.fillStyle=this.backgroundColor,b.fillRect(0,0,256,256),b.restore());let S=0,P=this.paintRules;if(S=Ne(b,r.z,d,this.xray?null:f,P,w,F,!1,this.debug),this.debug){b.save(),b.fillStyle=this.debug,b.font="600 12px sans-serif",b.fillText(`${r.z} ${r.x} ${r.y}`,4,14),b.font="12px sans-serif";let k=28;for(let[C,R]of d){let te=R[0].dataTile;b.fillText(`${C+(C?" ":"")+te.z} ${te.x} ${te.y}`,4,k),k+=14}b.font="600 10px sans-serif",S>8&&(b.fillText(`${S.toFixed()} ms paint`,4,k),k+=14),h>8&&b.fillText(`${h.toFixed()} ms layout`,4,k),b.strokeStyle=this.debug,b.lineWidth=.5,b.beginPath(),b.moveTo(0,0),b.lineTo(0,256),b.stroke(),b.lineWidth=.5,b.beginPath(),b.moveTo(0,0),b.lineTo(256,0),b.stroke(),b.restore()}s()})}rerenderTile(r){for(let a in this._tiles){let o=this._wrapCoords(this._keyToTileCoords(a));r===this._tileCoordsToKey(o)&&this.renderTile(o,this._tiles[a].el,r)}}queryTileFeaturesDebug(r,a,o=16){let s=new Map;for(let[c,u]of this.views)s.set(c,u.queryFeatures(r,a,this._map.getZoom(),o));return s}clearLayout(){this.labelers=new xe(this.scratch,this.labelRules,16,this.onTilesInvalidated)}rerenderTiles(){for(let r in this._tiles){let a=this._wrapCoords(this._keyToTileCoords(r)),o=this._tileCoordsToKey(a);this.renderTile(a,this._tiles[r].el,o)}}createTile(r,a){let o=L.DomUtil.create("canvas","leaflet-tile");o.lang=this.lang;let s=this._tileCoordsToKey(r);return o.key=s,this.renderTile(r,o,s,()=>{a(void 0,o)}),o}_removeTile(r){let a=this._tiles[r];a&&(a.el.removed=!0,a.el.key=void 0,L.DomUtil.removeClass(a.el,"leaflet-tile-loaded"),a.el.width=a.el.height=0,L.DomUtil.remove(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))}};l(t,"LeafletLayer");let e=t;return new e(n)},"leafletLayer");function yn(n){let e=0,t=0;for(let s of n)e+=s.w*s.h,t=Math.max(t,s.w);n.sort((s,c)=>c.h-s.h);let r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),t),h:1/0}],a=0,o=0;for(let s of n)for(let c=r.length-1;c>=0;c--){let u=r[c];if(!(s.w>u.w||s.h>u.h)){if(s.x=u.x,s.y=u.y,o=Math.max(o,s.y+s.h),a=Math.max(a,s.x+s.w),s.w===u.w&&s.h===u.h){let d=r.pop();c<r.length&&(r[c]=d)}else s.h===u.h?(u.x+=s.w,u.w-=s.w):s.w===u.w?(u.y+=s.h,u.h-=s.h):(r.push({x:u.x+s.w,y:u.y,w:u.w-s.w,h:s.h}),u.y+=s.h,u.h-=s.h);break}}return{w:a,h:o,fill:e/(a*o)||0}}l(yn,"potpack");var La=l((n,e,t)=>{let i=new FontFace(n,`url(${e})`,{weight:t});return document.fonts.add(i),i.load()},"Font"),xi=l(n=>A(void 0,null,function*(){return new Promise((e,t)=>{let i=new Image;i.onload=()=>e(i),i.onerror=()=>t("Invalid SVG"),i.src=n})}),"mkimg"),Pa=`
<svg width="20px" height="20px" viewBox="0 0 50 50" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <rect width="50" height="50" fill="#cccccc"/>
    <g transform="translate(5,5)">
        <path fill="none" stroke="#666666" stroke-width="7" d="m11,12a8.5,8 0 1,1 17,0q0,4-4,6t-4.5,4.5-.4,4v.2m0,3v7"/>
    </g>
</svg>
`,_n=class _n{constructor(e){this.src=e,this.canvas=document.createElement("canvas"),this.mapping=new Map,this.missingBox={x:0,y:0,w:0,h:0}}load(){return A(this,null,function*(){let e=this.src,t=window.devicePixelRatio;e.endsWith(".html")&&(e=yield(yield fetch(e)).text());let i=new window.DOMParser().parseFromString(e,"text/html"),r=Array.from(i.body.children),a=yield xi(`data:image/svg+xml;base64,${btoa(Pa)}`),o=[{w:a.width*t,h:a.height*t,img:a,id:""}],s=new XMLSerializer;for(let d of r){let f=`data:image/svg+xml;base64,${btoa(s.serializeToString(d))}`,m=yield xi(f);o.push({w:m.width*t,h:m.height*t,img:m,id:d.id})}let c=yn(o);this.canvas.width=c.w,this.canvas.height=c.h;let u=this.canvas.getContext("2d");if(u)for(let d of o)d.x!==void 0&&d.y!==void 0&&(u.drawImage(d.img,d.x,d.y,d.w,d.h),d.id?this.mapping.set(d.id,{x:d.x,y:d.y,w:d.w,h:d.h}):this.missingBox={x:d.x,y:d.y,w:d.w,h:d.h});return this})}get(e){let t=this.mapping.get(e);return t||(t=this.missingBox),t}};l(_n,"Sheet");var xn=_n;return Mi(Sa);})();
//# sourceMappingURL=protomaps-leaflet.js.map